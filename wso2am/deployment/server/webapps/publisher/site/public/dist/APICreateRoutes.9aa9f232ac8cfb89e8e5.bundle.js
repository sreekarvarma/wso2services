/*! For license information please see APICreateRoutes.9aa9f232ac8cfb89e8e5.bundle.js.LICENSE.txt */
"use strict";(this.webpackChunk_wso2apim_publisher=this.webpackChunk_wso2apim_publisher||[]).push([[879],{31404:(e,t,n)=>{n.r(t),n.d(t,{default:()=>gn});var r=n(96540),a=n(11848),i=n(56347),o=n(8843),l=n(49450),s=n(5455),c=n(5556),u=n.n(c),p=n(33551),d=n(99020),f=n(69067),m=n(58065),y=n(38798),A=n(74010),v=n(54625),g=n(84712),h=n(73357),b=n(4686),P=n(21070),E=n(87458),I=n(34339);function C(e){var t=e.title,n=e.children;return r.createElement(d.Ay,{container:!0},r.createElement(d.Ay,{item:!0,sm:!1,md:3}),r.createElement(d.Ay,{item:!0,sm:12,md:6},r.createElement(d.Ay,{container:!0,sx:{pt:2}},r.createElement(d.Ay,{item:!0,md:12,sx:{mb:3}},t),r.createElement(d.Ay,{item:!0,xs:12,md:12},r.createElement(I.A,{elevation:0,sx:{p:5}},n)))))}C.propTypes={title:u().element.isRequired,children:u().arrayOf(u().element).isRequired};var w=n(1043),S=n(25239),x=n(19455),O=n(92728),M=n(41340),D=n(1775),j=n(53215),T=n(69554),L=n(48805),W=n(45359),k=n(6347),V=n(69307),R=n(3542);function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=U(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Q(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z="DefaultAPIForm",J={Regular:"wso2/synapse",APK:"wso2/apk",AWS:"AWS"},$={mandatoryStar:"".concat(z,"-mandatoryStar"),helperTextContext:"".concat(z,"-helperTextContext"),endpointValidChip:"".concat(z,"-endpointValidChip"),endpointInvalidChip:"".concat(z,"-endpointInvalidChip"),endpointErrorChip:"".concat(z,"-endpointErrorChip"),iconButton:"".concat(z,"-iconButton"),iconButtonValid:"".concat(z,"-iconButtonValid"),radioOutline:"".concat(z,"-radioOutline"),newLabel:"".concat(z,"-newLabel")},K=(0,a.Ay)(d.Ay)((function(e){var t=e.theme;return Q(Q(Q(Q(Q(Q(Q(Q(Q({},"& .".concat($.mandatoryStar),{color:t.palette.error.main,marginLeft:t.spacing(.1)}),"& .".concat($.helperTextContext),{"& p":{textOverflow:"ellipsis",width:400,display:"block",whiteSpace:"nowrap",overflow:"hidden"}}),"& .".concat($.endpointValidChip),{color:"green",border:"1px solid green"}),"& .".concat($.endpointInvalidChip),{color:"#ffd53a",border:"1px solid #ffd53a"}),"& .".concat($.endpointErrorChip),{color:"red",border:"1px solid red"}),"& .".concat($.iconButton),{padding:t.spacing(1)}),"& .".concat($.iconButtonValid),{padding:t.spacing(1),color:R.A[500]}),"& .".concat($.radioOutline),{display:"flex",alignItems:"center",padding:"10px",paddingRight:"15px",marginTop:"8px",marginLeft:0,marginRight:0,borderRadius:"8px",transition:"border 0.3s","&.Mui-checked":{border:"2px solid ".concat(t.palette.primary.main)}}),"& .".concat($.newLabel),{backgroundColor:"green",color:"white",fontWeight:"bold",fontSize:"0.6rem",padding:"2px 4px",borderRadius:"4px",marginLeft:"10px",display:"inline-block"})}));function Y(e,t){var n,r=e.context,a=e.version;return n=t?"{channel}/{version}":"{context}/{version}",r&&(n=r,r.indexOf("{version}")<0&&(n=r+"/{version}")),a&&(n=n.replace("{version}",a)),n}function H(e){var t=e.onChange,n=e.onValidate,a=e.api,i=e.isAPIProduct,o=e.multiGateway,l=e.isWebSocket,s=e.children,c=e.appendChildrenBeforeEndpoint,u=e.hideEndpoint,f=e.readOnlyAPIEndpoint,y=e.settings,A=_((0,r.useState)({}),2),v=A[0],g=A[1],P=_((0,r.useState)(),2),E=P[0],I=P[1],C=_((0,r.useState)(""),2),R=C[0],F=C[1],N=_((0,r.useState)(!1),2),U=N[0],q=N[1],z=_((0,r.useState)(!1),2),H=z[0],X=z[1],Z=_((0,r.useState)({"wso2/synapse":!0,"wso2/apk":!0,AWS:!0}),2),ee=Z[0],te=Z[1];(0,r.useEffect)((function(){if(n(Boolean(a.name)&&Boolean(a.version)&&Boolean(a.context)),o){var e=y&&y.environment;o.forEach((function(t){if(y&&y.gatewayTypes.length>=2&&Object.values(J).includes(t.value)){var n,r=B(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(J[a.gatewayType]===t.value){te((function(e){return G(G({},e),{},Q({},t.value,!0))}));break}te((function(e){return G(G({},e),{},Q({},t.value,!1))}))}}catch(e){r.e(e)}finally{r.f()}}}))}}),[]);var ne,re,ae,ie=function(e){var t=Object.entries(e).length>0&&Object.entries(e).map((function(e){return null==_(e,2)[1]})).reduce((function(e,t){return e&&t}));t=t&&Boolean(a.name)&&Boolean(a.version)&&Boolean(a.context),n(t,v),g(e)};function oe(e,t){switch(e){case"name":var n=L.A.apiName.validate(t,{abortEarly:!1}).error;null===n?L.A.apiParameter.validate(e+":"+t).then((function(e){ie(G(G({},v),{},!0===e?{name:{details:[{message:r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.validation.error.name.exists",defaultMessage:[{type:0,value:"Name "},{type:1,value:"value"},{type:0,value:" already exists"}],values:{value:t}})}]}}:{name:n}))})):ie(G(G({},v),{},{name:n}));break;case"context":var a=L.A.apiContext.required().validate(t,{abortEarly:!1}).error,i=t.startsWith("/")?t:"/"+t;if(null===a){var o,s=B(i.split("/"));try{for(s.s();!(o=s.n()).done;){var c=o.value;null!==c&&"{version}"!==c&&(c.includes("{version}")?(a=L.A.apiContextWithoutKeyWords.required().validate(t,{abortEarly:!1}).error,ie(G(G({},v),{},{context:{details:[{message:r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.validation.error.version.exists.as.a.substring.in.path.param",defaultMessage:[{type:1,value:"version"},{type:0,value:" cannot exist as a substring in a path param"}]})}]}}))):(c.includes("{")||c.includes("}"))&&(a=L.A.apiContextWithoutKeyWords.required().validate(t,{abortEarly:!1}).error,ie(G(G({},v),{},{context:{details:[{message:r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.validation.error.curly.braces.cannot.be.in.path.param",defaultMessage:[{type:1,value:"or"},{type:0,value:" cannot exist as a substring in a path param"}]})}]}}))))}}catch(e){s.e(e)}finally{s.f()}var u=0;if(null===a){var p,d=B(i);try{for(d.s();!(p=d.n()).done;){var f=p.value;"("===f?u++:")"===f&&u--,u<0&&ie(G(G({},v),{},{context:{details:[{message:r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.validation.error.unbalanced.parantheses",defaultMessage:[{type:0,value:"Parentheses should be balanced in API context"}]})}]}}))}}catch(e){d.e(e)}finally{d.f()}u>0&&ie(G(G({},v),{},{context:{details:[{message:r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.validation.error.unbalanced.parantheses",defaultMessage:[{type:0,value:"Parentheses should be balanced in API context"}]})}]}}))}null===a&&0===u&&L.A.apiParameter.validate(e+":"+i).then((function(e){ie(G(G({},v),{},!0===e?{context:{details:[{message:l?i+" channel already exists":i+" context already exists"}]}}:{context:a,version:null}))}))}else ie(G(G({},v),{},{context:a}));break;case"version":var y=L.A.apiVersion.required().validate(t).error;ie(G(G({},v),{},{version:y}));break;case"endpoint":if(l&&t&&t.length>0){var A=L.A.wsUrl.validate(t).error;ie(G(G({},v),{},{endpointURL:A}))}}}return r.createElement(K,{item:!0,md:12},r.createElement("form",{noValidate:!0,autoComplete:"off"},r.createElement(w.A,{autoFocus:!0,fullWidth:!0,id:"api-name",error:Boolean(v.name),label:r.createElement(r.Fragment,null,r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.name",defaultMessage:[{type:0,value:"Name"}]}),r.createElement("sup",{className:$.mandatoryStar},"*")),helperText:v.name&&v.name.details.map((function(e,t){return r.createElement("div",{style:{marginTop:0!==t&&"10px"}},e.message)})),value:a.name,name:"name",onChange:t,InputProps:{id:"itest-id-apiname-input",onBlur:function(e){oe("name",e.target.value)}},InputLabelProps:{for:"itest-id-apiname-input"},margin:"normal",variant:"outlined"}),r.createElement(d.Ay,{container:!0,spacing:2},i?r.createElement(r.Fragment,null,r.createElement(d.Ay,{item:!0,md:8,xs:6},r.createElement(w.A,{fullWidth:!0,id:"context",error:Boolean(v.context),label:r.createElement(r.Fragment,null,r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.api.product.context",defaultMessage:[{type:0,value:"Context"}]}),r.createElement("sup",{className:$.mandatoryStar},"*")),name:"context",value:a.context,onChange:t,InputProps:{onBlur:function(e){oe("context",e.target.value)}},helperText:v.context&&v.context.details.map((function(e,t){return r.createElement("div",{key:e.message,style:{marginTop:0!==t&&"10px"}},e.message)}))||r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.api.product.actual.context.helper",defaultMessage:[{type:0,value:"API Product will be exposed in "},{type:1,value:"actualContext"},{type:0,value:"context at the gateway"}],values:{actualContext:Y(a)}}),margin:"normal",variant:"outlined"})),r.createElement(d.Ay,{item:!0,md:4,xs:6},r.createElement(w.A,{fullWidth:!0,id:"version",error:Boolean(v.version),label:r.createElement(r.Fragment,null,r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.api.product.version",defaultMessage:[{type:0,value:"Version"}]}),r.createElement("sup",{className:$.mandatoryStar},"*")),name:"version",value:a.version,onChange:t,InputProps:{id:"itest-id-apiversion-input",onBlur:function(e){oe("version",e.target.value)}},InputLabelProps:{for:"itest-id-apiversion-input"},helperText:v.version&&v.version.message,margin:"normal",variant:"outlined"}))):r.createElement(r.Fragment,null,r.createElement(d.Ay,{item:!0,md:8,xs:6},r.createElement(w.A,{fullWidth:!0,id:"context",error:Boolean(v.context),label:r.createElement(r.Fragment,null,l?r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.api.channel",defaultMessage:[{type:0,value:"Channel"}]}):r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.api.context",defaultMessage:[{type:0,value:"Context"}]}),r.createElement("sup",{className:$.mandatoryStar},"*")),name:"context",value:a.context,onChange:t,InputProps:{id:"itest-id-apicontext-input",onBlur:function(e){oe("context",e.target.value)}},InputLabelProps:{for:"itest-id-apicontext-input"},helperText:v.context&&v.context.details.map((function(e,t){return r.createElement("div",{style:{marginTop:0!==t&&"10px"}},e.message)}))||r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.api.actual.context.helper",defaultMessage:[{type:0,value:"API will be exposed in "},{type:1,value:"actualContext"},{type:0,value:" context at the gateway"}],values:{actualContext:Y(a,l)}}),classes:{root:$.helperTextContext},margin:"normal",variant:"outlined"})),r.createElement(d.Ay,{item:!0,md:4,xs:6},r.createElement(w.A,{fullWidth:!0,id:"version",error:Boolean(v.version),label:r.createElement(r.Fragment,null,r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.version",defaultMessage:[{type:0,value:"Version"}]}),r.createElement("sup",{className:$.mandatoryStar},"*")),name:"version",value:a.version,onChange:t,InputProps:{id:"itest-id-apiversion-input",onBlur:function(e){oe("version",e.target.value)}},InputLabelProps:{for:"itest-id-apiversion-input"},helperText:v.version&&v.version.message,margin:"normal",variant:"outlined"})))),c&&!!s&&s,!i&&!u&&r.createElement(w.A,{fullWidth:!0,id:"itest-id-apiendpoint-input",disabled:null!==f,label:r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.api.endpoint",defaultMessage:[{type:0,value:"Endpoint"}]}),name:"endpoint",value:a.endpoint,onChange:t,helperText:v.endpointURL&&v.endpointURL.details.map((function(e,t){return r.createElement("div",{style:{marginTop:0!==t&&"10px"}},e.message)})),error:Boolean(v.endpointURL),margin:"normal",variant:"outlined",InputProps:{onBlur:function(e){oe("endpoint",e.target.value)},endAdornment:r.createElement(S.A,{position:"end"},R&&r.createElement(T.A,{label:R,className:E?$.endpointValidChip:(ne=H,re=$.endpointErrorChip,ae=$.endpointInvalidChip,ne?re:ae),variant:"outlined"}),!l&&r.createElement(x.A,{className:E?$.iconButtonValid:$.iconButton,"aria-label":"TestEndpoint",onClick:function(){return e=a.endpoint,q(!0),void(new b.A).testEndpoint(e).then((function(e){null!==e.body.error?(F(e.body.error),X(!0)):(F(e.body.statusCode+" "+e.body.statusMessage),X(!1)),e.body.statusCode>=200&&e.body.statusCode<300?(I(!0),X(!1)):I(!1)})).finally((function(){q(!1)}));var e},disabled:U,size:"large"},U?r.createElement(h.A,{size:20}):r.createElement(O.A,null,"check_circle")))}}),o&&o.length>1&&r.createElement(d.Ay,{container:!0,xs:12,ml:0,spacing:2},r.createElement(W.A,{component:"fieldset",fullWidth:!0},r.createElement(V.A,{sx:{marginTop:"20px"}},r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.select.gateway.type",defaultMessage:[{type:0,value:"Select Gateway type"}]})),r.createElement(M.A,{row:!0,"aria-label":"gateway-type",name:"gatewayType",value:a.gatewayType,onChange:t},o.map((function(e,t){return r.createElement(d.Ay,{item:!0,xs:Math.floor(12/o.length),key:e.value,display:"grid",paddingRight:t===o.length-1?0:1,paddingLeft:0===t?0:1},r.createElement(D.A,{value:e.value,className:$.radioOutline,control:r.createElement(j.A,null),disabled:!ee[e.value],label:r.createElement("div",null,r.createElement("span",null,e.name),e.isNew&&r.createElement("span",{className:"".concat($.newLabel)},"New"),r.createElement(p.A,{variant:"body2",color:"textSecondary"},e.description)),sx:{border:(n=e.value,a.gatewayType===n?"2px solid #006E9C":"2px solid gray")}}));var n}))),r.createElement(k.A,{sx:{marginLeft:0}},r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.select.gateway.type.helper.text",defaultMessage:[{type:0,value:"Select the gateway type where your API will run."}]})))),!c&&!!s&&s),r.createElement(d.Ay,{container:!0,direction:"row",justifyContent:"flex-end",alignItems:"center"},r.createElement(d.Ay,{item:!0},r.createElement(p.A,{variant:"caption",display:"block",gutterBottom:!0},r.createElement("sup",{style:{color:"red"}},"*")," ",r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.mandatory.fields",defaultMessage:[{type:0,value:"Mandatory fields"}]})))))}H.defaultProps={onValidate:function(){},api:{},isWebSocket:!1,readOnlyAPIEndpoint:null},H.propTypes={api:u().shape({}),multiGateway:u().isRequired,isAPIProduct:u().shape({}).isRequired,isWebSocket:u().shape({}),onChange:u().func.isRequired,onValidate:u().func,readOnlyAPIEndpoint:u().string};var X=n(14739),Z=n(90431),ee=n(85877),te=n(49719);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=se(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw i}}}}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ne(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||se(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){if(e){if("string"==typeof e)return ce(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ue(){ue=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof v?t:v,o=Object.create(i.prototype),l=new D(r||[]);return a(o,"_invoke",{value:S(e,n,l)}),o}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",m="executing",y="completed",A={};function v(){}function g(){}function h(){}var b={};c(b,o,(function(){return this}));var P=Object.getPrototypeOf,E=P&&P(P(j([])));E&&E!==n&&r.call(E,o)&&(b=E);var I=h.prototype=v.prototype=Object.create(b);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(a,i,o,l){var s=p(e[a],e,i);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==ne(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):t.resolve(u).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,l)}))}l(s.arg)}var i;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return i=i?i.then(a,a):a()}})}function S(t,n,r){var a=d;return function(i,o){if(a===m)throw Error("Generator is already running");if(a===y){if("throw"===i)throw o;return{value:e,done:!0}}for(r.method=i,r.arg=o;;){var l=r.delegate;if(l){var s=x(l,r);if(s){if(s===A)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===d)throw a=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=m;var c=p(t,n,r);if("normal"===c.type){if(a=r.done?y:f,c.arg===A)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(a=y,r.method="throw",r.arg=c.arg)}}}function x(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),A;var i=p(a,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,A;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,A):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,A)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function D(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function j(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(ne(t)+" is not iterable")}return g.prototype=h,a(I,"constructor",{value:h,configurable:!0}),a(h,"constructor",{value:g,configurable:!0}),g.displayName=c(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,c(e,s,"GeneratorFunction")),e.prototype=Object.create(I),e},t.awrap=function(e){return{__await:e}},C(w.prototype),c(w.prototype,l,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new w(u(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},C(I),c(I,s,"Generator"),c(I,o,(function(){return this})),c(I,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=j,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return l.type="throw",l.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;M(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:j(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),A}},t}function pe(e,t,n,r,a,i,o){try{var l=e[i](o),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,a)}function de(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function o(e){pe(i,r,a,o,l,"next",e)}function l(e){pe(i,r,a,o,l,"throw",e)}o(void 0)}))}}var fe={Regular:"wso2/synapse",APK:"wso2/apk",AWS:"AWS"},me=function(){var e=de(ue().mark((function e(){var t,n;return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.A.policies("subscription"),e.next=3,t;case 3:return n=e.sent,e.abrupt("return",n.body.list);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function ye(e){var t,n=e.isWebSocket,a=e.isAPIProduct,i=e.history,o=e.intl,s=e.multiGateway,c=(0,l.Jy)(),u=c.data,y=c.isLoading,I=c.error,w=le((0,r.useState)(!1),2),S=w[0],x=w[1],O=le((0,r.useState)(null),2),M=O[0],D=O[1],j=le((0,r.useReducer)((function(e,t){var n=t.action,r=t.value;switch(n){case"name":case"version":case"endpoint":case"context":case"gatewayType":case"isFormValid":return ie(ie({},e),{},oe({},n,r));default:return e}}),{formValidity:!1,gatewayType:s&&(s.filter((function(e){return"wso2/synapse"===e.value})).length>0?"wso2/synapse":null===(t=s[0])||void 0===t?void 0:t.value)}),2),T=j[0],L=j[1];(0,r.useEffect)((function(){I&&D(I.message)}),[I]),(0,r.useEffect)((function(){if(null!=u&&u.gatewayTypes&&u.gatewayTypes.includes("Regular")){var e,t=re(u.environment);try{for(t.s();!(e=t.n()).done;)if("Regular"===e.value.gatewayType){x(!0);break}}catch(e){t.e(e)}finally{t.f()}}}),[y]);var W=le((0,r.useState)(),2),k=W[0],V=W[1],R=le((0,r.useState)(!1),2),F=R[0],N=R[1],G=le((0,r.useState)(!1),2),B=G[0],_=G[1],U=le((0,r.useState)(!1),2),q=U[0],Q=U[1],z=le((0,r.useState)(!1),2),J=z[0],$=z[1],K=le((0,r.useState)(!1),2),Y=K[0],ne=K[1],ae=T.endpoint,se=!(T.name&&T.version&&T.context)||k||F;function ce(){return pe.apply(this,arguments)}function pe(){return pe=de(ue().mark((function e(){var t,r,l,s,c,u,p,d,f,m,y;return ue().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(!0),t=T.name,r=T.version,l=T.context,s=T.endpoint,c=T.gatewayType,e.next=4,me();case 4:return 0===(d=e.sent).length?g.A.info(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.policies.not.available",defaultMessage:[{type:0,value:"Throttling policies not available. Contact your administrator"}]})):p=d.filter((function(e){return"Unlimited"===e.name})).length>0?["Unlimited"]:[d[0].name],f={name:t,version:r,context:l,gatewayType:c,policies:p},s&&(f.endpointConfig={endpoint_type:"http",sandbox_endpoints:{url:s},production_endpoints:{url:s}}),n&&(f.type="WS"),a?(m=new X.A(f),u=m.saveProduct(f).then((function(e){return g.A.info(o.formatMessage({id:"Apis.Create.Default.APICreateDefault.api.product.created.success",defaultMessage:[{type:0,value:"API Product created successfully"}]})),i.push("/api-products/".concat(e.id,"/overview")),e})).catch((function(e){if(console.error(e),e.response)return D(e.response.body),e.response.body.description;var t=o.formatMessage({id:"Apis.Create.Default.APICreateDefault.api.product.created.error",defaultMessage:[{type:0,value:"Something went wrong while adding the API Product"}]});return D(t),t}))):(y=new b.A(f),u=y.save(),g.A.loading(u,{loading:"Creating API...",success:o.formatMessage({id:"Apis.Create.Default.APICreateDefault.api.created.success",defaultMessage:[{type:0,value:"API created successfully"}]}),error:function(e){if(console.error(e),N(!1),e.response)return D(e.response.body),e.response.body.description;var t=o.formatMessage({id:"Apis.Create.Default.APICreateDefault.api.created.error",defaultMessage:[{type:0,value:"Something went wrong while adding the API"}]});return D(t),t}})),e.abrupt("return",u.finally((function(){return V(!1)})));case 11:case"end":return e.stop()}}),e)}))),pe.apply(this,arguments)}(0,r.useEffect)((function(){null!=u&&u.customProperties&&u.customProperties.length>0&&$(!0)}),[u]);var Ae=r.createElement(r.Fragment,null,r.createElement(p.A,{variant:"h5",component:"h1"},r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.api.heading",defaultMessage:[{type:0,value:"Create an API"}]})),r.createElement(p.A,{variant:"caption"},r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.api.sub.heading",defaultMessage:[{type:0,value:"Create an API by providing a Name, a Version, a Context and Backend Endpoint (optional)"}]})));return a?Ae=r.createElement(r.Fragment,null,r.createElement(p.A,{variant:"h5",component:"h1"},r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.apiProduct.heading",defaultMessage:[{type:0,value:"Create an API Product"}]})),r.createElement(p.A,{variant:"caption"},r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.apiProduct.sub.heading",defaultMessage:[{type:0,value:"Create an API Product by providing a Name, a Context, and Business Plans (optional)."}]}))):n&&(Ae=r.createElement(r.Fragment,null,r.createElement(p.A,{variant:"h5",component:"h1"},r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.webSocket.heading",defaultMessage:[{type:0,value:"Create a WebSocket API"}]})),r.createElement(p.A,{variant:"caption"},r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.webSocket.sub.heading",defaultMessage:[{type:0,value:"Create a WebSocket API by providing a Name, and a Context."}]})))),y?r.createElement(ee.A,null):r.createElement(C,{title:Ae},r.createElement(d.Ay,{container:!0,direction:"row",justifyContent:"center",alignItems:"center"},M&&r.createElement(d.Ay,{item:!0,xs:11},r.createElement(P.A,{onClose:function(){return D(null)},disableActions:!0,dense:!0,paperProps:{elevation:1},type:"error",message:M})),r.createElement(d.Ay,{item:!0,xs:12},y&&r.createElement(f.A,{mt:-2},r.createElement(E.A,{"data-testid":"loading-publisher-settings"}))),r.createElement(d.Ay,{item:!0,xs:12,"data-testid":"default-api-form"},r.createElement(H,{onValidate:function(e){L({action:"isFormValid",value:e})},onChange:function(e){var t=e.target,n=t.name,r=t.value;if(L({action:n,value:r}),"gatewayType"===n){var a=u&&u.environment;if(u&&u.gatewayTypes.length>=2&&Object.values(fe).includes(r)){var i,o=re(a);try{for(o.s();!(i=o.n()).done;){var l=i.value;if(fe[l.gatewayType]===r){x(!0);break}x(!1)}}catch(e){o.e(e)}finally{o.f()}}}},api:T,multiGateway:s,isAPIProduct:a,isWebSocket:n,settings:u})),r.createElement(d.Ay,{item:!0,xs:12},r.createElement(d.Ay,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},r.createElement(d.Ay,{item:!0},r.createElement(A.A,{id:"itest-create-default-api-button",variant:"contained",color:"primary",disabled:se||!T.isFormValid,onClick:function(){ce().then((function(e){i.push("/apis/".concat(e.id,"/overview"))}))}},r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.create.btn",defaultMessage:[{type:0,value:"Create"}]})," ",k&&!Y&&r.createElement(h.A,{size:24}))),!J&&!Z.A.isNotPublisher()&&r.createElement(d.Ay,{item:!0},r.createElement(A.A,{id:"itest-id-apicreatedefault-createnpublish",variant:"contained",color:"primary",disabled:!S||q||B||!ae||se||!T.isFormValid,onClick:function(){var e=903300,t=new b.A;ne(!0),ce().then((function(n){_(!0);var a=t.createRevision(n.id,{description:"Initial Revision"});g.A.loading(a,{success:o.formatMessage({id:"Apis.Create.Default.APICreateDefault.api.revision.created.success",defaultMessage:[{type:0,value:"API Revision created successfully"}]}),error:function(t){if(console.error(t),t.response){if(t.response.body.code===e){var n=JSON.parse(t.response.body.description).blockingViolations;return r.createElement(f.A,{sx:{width:"100%"}},r.createElement(p.A,null,r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.error.governance.violation",defaultMessage:[{type:0,value:"Failed to create the API Revision due to governance violations"}]})),r.createElement(f.A,{sx:{display:"flex",justifyContent:"flex-end",mt:1}},r.createElement(A.A,{onClick:function(){return te.A.downloadAsJSON(n,"governance-violations")},sx:{color:"inherit",fontWeight:600,textDecoration:"none",transition:"all 0.3s","&:hover":{backgroundColor:"inherit",transform:"translateY(-2px)",textShadow:"0px 1px 2px rgba(0,0,0,0.2)"}}},r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.error.governance.violation.download",defaultMessage:[{type:0,value:"Download Violations"}]}))))}return D(t.response.body),t.response.body.description}return D("Something went wrong while creating the API Revision"),o.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.errorMessage.create.revision",defaultMessage:[{type:0,value:"Something went wrong while creating the API Revision"}]})},loading:"Creating API revision..."}),a.then((function(a){var l=a.body.id;_(!1);var s=u.environment.map((function(e){return e.name})),c=[],d=u.environment,y=function(e){var t=d.find((function(t){return t.name===e&&t.vhosts.length>0}));return t&&t.vhosts[0].host};if(u.gatewayTypes&&1===u.gatewayTypes.length)s&&s.length>0&&(s.includes("Default")&&y("Default")?c.push({name:"Default",displayOnDevportal:!0,vhost:y("Default")}):y(s[0])&&c.push({name:s[0],displayOnDevportal:!0,vhost:y(s[0])}));else{var v=u.environment,h=!1;v.forEach((function(e){var t=fe[e.gatewayType];!h&&t===T.gatewayType&&y(e.name)&&(c.push({name:e.name,displayOnDevportal:!0,vhost:y(e.name)}),h=!0)}))}Q(!0);var b=t.deployRevision(n.id,l,c);g.A.loading(b,{loading:"Deploying API...",success:o.formatMessage({id:"Apis.Create.Default.APICreateDefault.api.revision.deployed.success",defaultMessage:[{type:0,value:"API Revision Deployed Successfully"}]}),error:function(t){if(console.error(t),t.response){if(t.response.body.code===e){var n=JSON.parse(t.response.body.description).blockingViolations;return r.createElement(f.A,{sx:{width:"100%"}},r.createElement(p.A,null,r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.error.governance.violation",defaultMessage:[{type:0,value:"Deployment failed due to governance violations"}]})),r.createElement(f.A,{sx:{display:"flex",justifyContent:"flex-end",mt:1}},r.createElement(A.A,{onClick:function(){return te.A.downloadAsJSON(n,"governance-violations")},sx:{color:"inherit",fontWeight:600,textDecoration:"none",transition:"all 0.3s","&:hover":{backgroundColor:"inherit",transform:"translateY(-2px)",textShadow:"0px 1px 2px rgba(0,0,0,0.2)"}}},r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.error.governance.violation.download",defaultMessage:[{type:0,value:"Download Violations"}]}))))}return D(t.response.body),t.response.body.description}return D("Something went wrong while publishing the API"),o.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.errorMessage.publish",defaultMessage:[{type:0,value:"Something went wrong while publishing the API"}]})}}),b.then((function(t){if(Q(!1),"CREATED"===t.body[0].status)N(!1),ne(!1),i.push("/apis/".concat(n.id,"/overview"));else{N(!0);var a=n.publish();g.A.loading(a,{loading:"Publishing API...",success:function(e){return e.body.workflowStatus===ye.WORKFLOW_STATUS.CREATED?o.formatMessage({id:"Apis.Create.Default.APICreateDefault.success.publishStatus",defaultMessage:[{type:0,value:"Lifecycle state change request has been sent"}]}):o.formatMessage({id:"Apis.Create.Default.APICreateDefault.success.otherStatus",defaultMessage:[{type:0,value:"API updated successfully"}]})},error:function(t){if(t.response.body.code===e){var n=JSON.parse(t.response.body.description).blockingViolations;return r.createElement(f.A,{sx:{width:"100%"}},r.createElement(p.A,null,r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.error.governance.violation",defaultMessage:[{type:0,value:"Failed to publish the API due to governance violations"}]})),r.createElement(f.A,{sx:{display:"flex",justifyContent:"flex-end",mt:1}},r.createElement(A.A,{onClick:function(){return te.A.downloadAsJSON(n,"governance-violations")},sx:{color:"inherit",fontWeight:600,textDecoration:"none",transition:"all 0.3s","&:hover":{backgroundColor:"inherit",transform:"translateY(-2px)",textShadow:"0px 1px 2px rgba(0,0,0,0.2)"}}},r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.error.governance.violation.download",defaultMessage:[{type:0,value:"Download Violations"}]}))))}return o.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.otherStatus",defaultMessage:[{type:0,value:"Error while publishing the API"}]})}}),a.then((function(){return i.push("/apis/".concat(n.id,"/overview"))})).finally((function(){N(!1),ne(!1)}))}})).finally((function(){Q(!1)}))})).finally((function(){_(!1)}))}))}},!F&&!B&&!q&&r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.create.publish.btn",defaultMessage:[{type:0,value:"Create & Publish"}]}),(F||B||q)&&r.createElement(h.A,{size:24}),k&&F&&r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.create.publish.btn.creating.status",defaultMessage:[{type:0,value:"Creating API . . ."}]}),!k&&B&&!q&&r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.create.publish.btn.creating.revision.status",defaultMessage:[{type:0,value:"Creating Revision . . ."}]}),!k&&F&&!B&&!q&&r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.create.publish.btn.creating.publishing.status",defaultMessage:[{type:0,value:"Publishing API . . ."}]}),!k&&F&&!B&&q&&r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.create.publish.btn.creating.deploying.revision.status",defaultMessage:[{type:0,value:"Deploying Revision . . ."}]}))),r.createElement(d.Ay,{item:!0},r.createElement(v.N_,{to:"/apis/"},r.createElement(A.A,{variant:"text"},r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))))))),r.createElement(d.Ay,{item:!0,xs:12},r.createElement(f.A,{mt:4})))}ye.defaultProps={isWebSocket:!1,isAPIProduct:!1},ye.WORKFLOW_STATUS={CREATED:"CREATED"},ye.propTypes={history:u().shape({push:u().func}).isRequired,multiGateway:u().isRequired,isAPIProduct:u().shape({}),isWebSocket:u().shape({}),intl:u().shape({formatMessage:u().func}).isRequired};const Ae=(0,i.y)((0,y.Ay)(ye));var ve=n(6442),ge=n(79595),he=n(82997),be=n(47363);function Pe(e){var t=e.title,n=e.children;return r.createElement(d.Ay,{container:!0},r.createElement(d.Ay,{item:!0,sm:!1,md:2}),r.createElement(d.Ay,{item:!0,sm:12,md:8},r.createElement(d.Ay,{container:!0,sx:{pt:2}},r.createElement(d.Ay,{item:!0,md:12,sx:{mb:3}},t),r.createElement(d.Ay,{item:!0,xs:12},r.createElement(I.A,{elevation:0,sx:{p:5}},n)))))}Pe.propTypes={title:u().element.isRequired,children:u().element.isRequired};var Ee=n(19922);function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){Oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Oe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ie(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Me="APIProductCreateWrapper",De={Paper:"".concat(Me,"-Paper"),saveButton:"".concat(Me,"-saveButton"),titleWrapper:"".concat(Me,"-titleWrapper"),buttonWrapper:"".concat(Me,"-buttonWrapper"),alternativeLabel:"".concat(Me,"-alternativeLabel")},je=(0,a.Ay)("div")((function(e){var t=e.theme;return Oe(Oe(Oe(Oe(Oe({},"& .".concat(De.Paper),{height:"40px"}),"& .".concat(De.saveButton),{padding:"0px 0px 0px 10px"}),"& .".concat(De.titleWrapper),{display:"flex",flexDirection:"row",alignItems:"center",paddingBottom:t.spacing(2)}),"& .".concat(De.buttonWrapper),{marginTop:t.spacing(4)}),"& .".concat(De.alternativeLabel),{marginTop:t.spacing(1)})}));function Te(e){var t=e.history,n=(0,ve.A)(),a=Se((0,r.useState)(0),2),i=a[0],o=a[1],s=Se((0,r.useState)([]),2),c=s[0],u=s[1],y=(0,l.Jy)().data,P=Se((0,r.useState)(!1),2),E=P[0],I=P[1],C=Se((0,r.useState)(!1),2),w=C[0],S=C[1],x=Se((0,r.useState)(!1),2),O=x[0],M=x[1],D=Se((0,r.useState)(!1),2),j=D[0],T=D[1],L=Se((0,r.useState)([]),2),W=L[0],k=L[1];(0,r.useEffect)((function(){b.A.policies("subscription").then((function(e){var t=e.body.list;0===t.length?g.A.info(n.formatMessage({id:"Apis.Create.APIProduct.APIProductCreateWrapper.error.policies.not.available",defaultMessage:[{type:0,value:"Throttling policies not available. Contact your administrator"}]})):t.filter((function(e){return"Unlimited"===e.name})).length>0?k(["Unlimited"]):k([t[0].name])}))}),[]);var V,R=r.createElement(je,null,r.createElement(p.A,{variant:"h5"},r.createElement(m.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.heading",defaultMessage:[{type:0,value:"Create an API Product"}]})),r.createElement(p.A,{variant:"caption"},r.createElement(m.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.sub.heading",defaultMessage:[{type:0,value:"Create an API Product by providing a Name, a Context, a Version, Resources, and Business Plans (optional)."}]}))),F=Se((0,r.useReducer)((function(e,t){var n=t.action,r=t.value;switch(n){case"type":case"name":case"context":case"version":case"isFormValid":case"apiResources":return we(we({},e),{},Oe({},n,r));case"preSetAPI":return we(we({},e),{},{name:r.name.replace(/[&/\\#,+()$~%.'":*?<>{}\s]/g,""),context:r.context});default:return e}}),{type:"ApiProductCreateWrapper",inputValue:"",formValidity:!1}),2),N=F[0],G=F[1],B=Se((0,r.useState)(),2),_=B[0],U=B[1],q=[r.createElement(m.A,{variant:"caption",id:"Apis.Create.APIProduct.APIProductCreateWrapper.defineProvide",defaultMessage:[{type:0,value:"Define API Product"}]}),r.createElement(m.A,{variant:"caption",id:"Apis.Create.APIProduct.APIProductCreateWrapper.resources",defaultMessage:[{type:0,value:"Add Resources"}]})],Q=function(){U(!0);var e={name:N.name,context:N.context,version:N.version,policies:W,apis:c,transport:["http","https"]};return(V=new X.A(e)).saveProduct(e).then((function(e){return g.A.info(n.formatMessage({id:"Apis.Create.APIProduct.APIProductCreateWrapper.created.success",defaultMessage:[{type:0,value:"API Product created successfully"}]})),e})).catch((function(e){e.response?g.A.error(e.response.body.description):g.A.error(n.formatMessage({id:"Apis.APIProductCreateWrapper.error.errorMessage.create.api.product",defaultMessage:[{type:0,value:"Something went wrong while adding the API Product"}]}))})).finally((function(){return U(!1)})).finally((function(){return U(!1)}))};return r.createElement(r.Fragment,null,r.createElement(Pe,{title:R},r.createElement(f.A,{sx:{mb:3}},r.createElement(ge.A,{alternativeLabel:!0,activeStep:i},q.map((function(e){return r.createElement(he.A,{key:e},r.createElement(be.A,{className:De.alternativeLabel},e))})))),r.createElement(d.Ay,{container:!0},r.createElement(d.Ay,{item:!0,md:12},0===i&&r.createElement(H,{onValidate:function(e){G({action:"isFormValid",value:e})},onChange:function(e){var t=e.target,n=t.name,r=t.value;G({action:n,value:r})},api:N,isAPIProduct:!0,settings:y}),1===i&&r.createElement(Ee.A,{apiResources:c,setApiResources:u,isStateCreate:!0,api:N})),r.createElement(d.Ay,{item:!0,md:12,sx:{mt:3}},r.createElement(d.Ay,{className:1===i&&De.saveButton,container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},r.createElement(d.Ay,{item:!0},1===i&&r.createElement(A.A,{onClick:function(){return o((function(e){return e-1}))}},r.createElement(m.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.back",defaultMessage:[{type:0,value:"Back"}]})),0===i&&r.createElement(v.N_,{to:"/api-products/"},r.createElement(A.A,null,r.createElement(m.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.cancel",defaultMessage:[{type:0,value:"Cancel"}]})))),r.createElement(d.Ay,{item:!0},1===i&&r.createElement(A.A,{variant:"contained",color:"primary",disabled:!N.isFormValid||_||0===c.length||E,onClick:function(){Q().then((function(e){t.push("/api-products/".concat(e.id,"/overview"))}))},id:"create-api-product-btn"},r.createElement(m.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.create",defaultMessage:[{type:0,value:"Create"}]}),_&&!E&&r.createElement(h.A,{size:24})),0===i&&r.createElement(A.A,{onClick:function(){return o((function(e){return e+1}))},variant:"contained",color:"primary",disabled:!N.isFormValid,id:"api-product-next-btn"},r.createElement(m.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.next",defaultMessage:[{type:0,value:"Next"}]}))),r.createElement(d.Ay,{item:!0},1===i&&!Z.A.isNotPublisher()&&r.createElement(A.A,{variant:"contained",color:"primary",id:"create-and-publish-api-product-btn",disabled:!N.isFormValid||_||0===c.length||O||w||!N.isFormValid,onClick:function(){I(!0),Q().then((function(e){S(!0),g.A.info(n.formatMessage({id:"Apis.Create.APIProduct.APIProductCreateWrapper.created.success",defaultMessage:[{type:0,value:"API Product created successfully"}]})),V.createProductRevision(e.id,{description:"Initial Revision"}).then((function(r){S(!1);var a=r.body.id;g.A.info(n.formatMessage({id:"Apis.Create.APIProduct.APIProductCreateWrapper.revision.created.success",defaultMessage:[{type:0,value:"API Revision created successfully"}]}));var i=y.environment.map((function(e){return e.name})),o=[],l=function(e){var t=y.environment.find((function(t){return t.name===e&&t.vhosts.length>0}));return t&&t.vhosts[0].host};i&&i.length>0&&(i.includes("Default")&&l("Default")?o.push({name:"Default",displayOnDevportal:!0,vhost:l("Default")}):l(i[0])&&o.push({name:i[0],displayOnDevportal:!0,vhost:l(i[0])})),M(!0),V.deployProductRevision(e.id,a,o).then((function(){g.A.info(n.formatMessage({id:"Apis.Create.APIProduct.APIProductCreateWrapper.revision.deployed.success",defaultMessage:[{type:0,value:"API Revision Deployed Successfully"}]})),M(!1),T(!0),V.updateLcState(e.id,"Publish").then((function(r){"CREATED"===r.body.workflowStatus?g.A.info(n.formatMessage({id:"Apis.Create.APIProduct.APIProductCreateWrapper.publishStatus",defaultMessage:[{type:0,value:"Lifecycle state change request has been sent"}]})):g.A.info(n.formatMessage({id:"Apis.Create.APIProduct.APIProductCreateWrapper.otherStatus",defaultMessage:[{type:0,value:"API Product status updated successfully"}]})),t.push("/api-products/".concat(e.id,"/overview"))}))})).catch((function(e){e.response?g.A.error(e.response.body.description):g.A.error(n.formatMessage({id:"Apis.APIProductCreateWrapper.error.errorMessage.deploy.revision",defaultMessage:[{type:0,value:"Something went wrong while deploying the API Product Revision"}]})),console.error(e)})).finally((function(){T(!1),I(!1)}))})).catch((function(e){e.response?g.A.error(e.response.body.description):g.A.error(n.formatMessage({id:"Apis.APIProductCreateWrapper.error.errorMessage.create.revision",defaultMessage:[{type:0,value:"Something went wrong while creating the API Product Revision"}]})),console.error(e)}))})).catch((function(e){e.response?g.A.error(e.response.body.description):g.A.error(n.formatMessage({id:"Apis.APIProductCreateWrapper.error.errorMessage.create.api.product",defaultMessage:[{type:0,value:"Something went wrong while adding the API Product"}]}))})).finally((function(){return U(!1)}))}},!j&&!w&&!O&&r.createElement(m.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.create.and.publish.btn",defaultMessage:[{type:0,value:"Create & Publish"}]}),(j||w||O)&&r.createElement(h.A,{size:24}),_&&j&&r.createElement(m.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.create.status",defaultMessage:[{type:0,value:"Creating API Product. . ."}]}),!_&&w&&!O&&r.createElement(m.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.create.revision.status",defaultMessage:[{type:0,value:"Creating Revision . . ."}]}),!_&&j&&!w&&!O&&r.createElement(m.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.create.publish.status",defaultMessage:[{type:0,value:"Publishing API Product. . ."}]}),!_&&j&&!w&&O&&r.createElement(m.A,{id:"Apis.Create.APIProduct.APIProductCreateWrapper.create.deploy.revision.status",defaultMessage:[{type:0,value:"Deploying Revision . . ."}]}))))))))}Te.propTypes={history:u().shape({push:u().func}).isRequired};var Le=n(11354);function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ve(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(n),!0).forEach((function(t){Ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=We(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=We(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==We(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e,t){var n=t.action,r=t.value;switch(n){case"type":case"inputValue":case"name":case"version":case"endpoint":case"gatewayType":case"context":case"policies":case"isFormValid":return Fe(Fe({},e),{},Ne({},n,r));case"inputType":return Fe(Fe({},e),{},Ne(Ne({},n,r),"inputValue","url"===r?"":null));case"preSetAPI":return Fe(Fe({},e),{},{name:r.name.replace(/[&/\\#,+()$~%.'":*?<>{}\s]/g,""),version:r.version,context:r.context,endpoint:r.endpoints&&r.endpoints[0]});default:return e}}function Be(e){var t,n=ke((0,r.useState)(0),2),a=n[0],o=n[1],s=(0,i.zy)().state||{},c=s.data,u=s.settings,y=s.multiGateway,P=e.history,E=e.multiGateway,I=(0,l.Jy)().data;I||(I=u),E||(E=y);var w=ke((0,r.useReducer)(Ge,{type:"ApiCreateOpenAPI",inputType:"url",inputValue:"",formValidity:!1,gatewayType:E&&(E.filter((function(e){return"wso2/synapse"===e.value})).length>0?"wso2/synapse":null===(t=E[0])||void 0===t?void 0:t.value)}),2),S=w[0],x=w[1];c&&0===a&&"DesignAssistant"===c.source&&(o(1),x({action:"preSetAPI",value:c}),x({action:"gatewayType",value:c.gatewayType}),x({action:"endpoint",value:c.endpoint}),x({action:"inputType",value:"file"}),x({action:"inputValue",value:c.file}));var O=(0,ve.A)();function M(e){x({action:"isFormValid",value:e})}var D=ke((0,r.useState)(),2),j=D[0],T=D[1];return r.createElement(C,{title:r.createElement(r.Fragment,null,r.createElement(p.A,{variant:"h5"},r.createElement(m.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.heading",defaultMessage:[{type:0,value:"Create an API using an OpenAPI definition."}]})),r.createElement(p.A,{variant:"caption"},r.createElement(m.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.sub.heading",defaultMessage:[{type:0,value:"Create an API using an existing OpenAPI definition file or URL."}]})))},r.createElement(f.A,{sx:{mb:2}},r.createElement(ge.A,{alternativeLabel:!0,activeStep:a},r.createElement(he.A,null,r.createElement(be.A,null,r.createElement(m.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.wizard.one",defaultMessage:[{type:0,value:"Provide OpenAPI"}]}))),r.createElement(he.A,null,r.createElement(be.A,null,r.createElement(m.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.wizard.two",defaultMessage:[{type:0,value:"Create API"}]}))))),r.createElement(d.Ay,{container:!0,spacing:2},r.createElement(d.Ay,{item:!0,xs:12},0===a&&r.createElement(Le.A,{onValidate:M,apiInputs:S,inputsDispatcher:x}),1===a&&r.createElement(H,{onValidate:M,onChange:function(e){var t=e.target,n=t.name,r=t.value;x({action:n,value:r})},multiGateway:E,api:S,isAPIProduct:!1,settings:I})),r.createElement(d.Ay,{item:!0,xs:12},r.createElement(d.Ay,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},r.createElement(d.Ay,{item:!0},0===a&&r.createElement(v.N_,{to:"/apis/"},r.createElement(A.A,null,r.createElement(m.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))),1===a&&(c&&"DesignAssistant"===c.source?r.createElement(A.A,{onClick:function(){P.push("/apis")}},r.createElement(m.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.designAssistant.back",defaultMessage:[{type:0,value:"Back"}]})):r.createElement(A.A,{onClick:function(){return o((function(e){return e-1}))}},r.createElement(m.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.back",defaultMessage:[{type:0,value:"Back"}]})))),r.createElement(d.Ay,{item:!0},0===a&&r.createElement(A.A,{onClick:function(){return o((function(e){return e+1}))},variant:"contained",color:"primary",disabled:!S.isFormValid,id:"open-api-create-next-btn"},r.createElement(m.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.next",defaultMessage:[{type:0,value:"Next"}]})),1===a&&r.createElement(A.A,{variant:"contained",color:"primary",disabled:!S.isFormValid||j,onClick:function(){T(!0);var e,t=S.name,n=S.version,r=S.context,a=S.endpoint,i=S.gatewayType,o=S.policies,l=void 0===o?["Unlimited"]:o,s=S.inputValue,c=S.inputType,u={name:t,version:n,context:r,gatewayType:"default"==(e=I&&1===I.gatewayTypes.length&&I.gatewayTypes.includes("Regular")?"wso2/synapse":I&&1===I.gatewayTypes.length&&I.gatewayTypes.includes("APK")?"wso2/apk":"default")?i:e,policies:l};a&&(u.endpointConfig={endpoint_type:"http",sandbox_endpoints:{url:a},production_endpoints:{url:a}});var p=new b.A(u);("file"===c?p.importOpenAPIByFile(s):p.importOpenAPIByUrl(s)).then((function(e){g.A.info(O.formatMessage({id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.created.success",defaultMessage:[{type:0,value:"API created successfully"}]})),P.push("/apis/".concat(e.id,"/overview"))})).catch((function(e){e.response?g.A.error(e.response.body.description):g.A.error(O.formatMessage({id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.created.error",defaultMessage:[{type:0,value:"Something went wrong while adding the API"}]})),console.error(e)})).finally((function(){return T(!1)}))},id:"open-api-create-btn"},r.createElement(m.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.create",defaultMessage:[{type:0,value:"Create"}]})," ",j&&r.createElement(h.A,{size:24})))))))}Be.propTypes={history:u().shape({push:u().func}).isRequired,multiGateway:u().string.isRequired};var _e=n(68810),Ue=n(15001),qe=n(58168),Qe=n(36632),ze=n(74848);let Je=!1;const $e=r.forwardRef((function(e,t){return Je||(console.warn(["MUI: The Alert component was moved from the lab to the core.","","You should use `import { Alert } from '@mui/material'`","or `import Alert from '@mui/material/Alert'`"].join("\n")),Je=!0),(0,ze.jsx)(Qe.A,(0,qe.A)({ref:t},e))}));var Ke=n(54937);let Ye=!1;const He=r.forwardRef((function(e,t){return Ye||(console.warn(["MUI: The AlertTitle component was moved from the lab to the core.","","You should use `import { AlertTitle } from '@mui/material'`","or `import AlertTitle from '@mui/material/AlertTitle'`"].join("\n")),Ye=!0),(0,ze.jsx)(Ke.A,(0,qe.A)({ref:t},e))}));var Xe=n(51555);function Ze(e){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ze(e)}function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ze(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ze(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return at(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?at(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function it(e){var t,n=(0,ve.A)(),a=rt((0,r.useState)(0),2),i=a[0],o=a[1],s=e.history,c=e.multiGateway,u=rt((0,r.useState)([]),2),y=u[0],P=u[1],E=(0,l.Jy)().data;(0,r.useEffect)((function(){b.A.policies("subscription").then((function(e){var t=e.body.list;0===t.length?g.A.info(n.formatMessage({id:"Apis.Create.WSDL.ApiCreateWSDL.error.policies.not.available",defaultMessage:[{type:0,value:"Throttling policies not available. Contact your administrator"}]})):t.filter((function(e){return"Unlimited"===e.name})).length>0?P(["Unlimited"]):P([t[0].name])}))}),[]);var I=rt((0,r.useReducer)((function(e,t){var n=t.action,r=t.value;switch(n){case"type":case"inputValue":case"name":case"version":case"endpoint":case"context":case"isFormValid":return tt(tt({},e),{},nt({},n,r));case"inputType":return tt(tt({},e),{},nt(nt({},n,r),"inputValue","url"===r?"":null));default:return e}}),{type:"SOAP",inputType:"url",inputValue:"",formValidity:!1,mode:"create",gatewayType:c&&(c.filter((function(e){return"wso2/synapse"===e.value})).length>0?"wso2/synapse":null===(t=c[0])||void 0===t?void 0:t.value)}),2),w=I[0],S=I[1];function x(e){S({action:"isFormValid",value:e})}var O=rt((0,r.useState)(),2),M=O[0],D=O[1];return r.createElement(C,{title:r.createElement(r.Fragment,null,1===i&&"SOAPTOREST"===w.type&&r.createElement(f.A,{mb:2},r.createElement($e,{severity:"warning"},r.createElement(He,null,r.createElement(m.A,{id:"Apis.Create.WSDL.ApiCreateWSDL.deprecated.msg",defaultMessage:[{type:0,value:"APIM supports only a limited set of capabilities with this feature. If you want to process complex WSDL/XML schema, please refer to the following documentation."}]})),r.createElement(Ue.A,{href:"https://mi.docs.wso2.com/en/latest/develop/creating-artifacts/creating-an-api/",target:"_blank"},"WSO2 Integration Studio Documentation"))),r.createElement(p.A,{variant:"h5"},r.createElement(m.A,{id:"Apis.Create.WSDL.ApiCreateWSDL.heading",defaultMessage:[{type:0,value:"Expose a SOAP Service as a REST API"}]})),r.createElement(p.A,{variant:"caption"},r.createElement(m.A,{id:"Apis.Create.WSDL.ApiCreateWSDL.sub.heading",defaultMessage:[{type:0,value:"Expose an existing SOAP service as a REST API by importing the WSDL of the SOAP service."}]})))},r.createElement(f.A,{sx:{mb:2}},r.createElement(ge.A,{alternativeLabel:!0,activeStep:i},r.createElement(he.A,null,r.createElement(be.A,null,r.createElement(m.A,{id:"Apis.Create.WSDL.ApiCreateWSDL.step.label.provide.wsdl",defaultMessage:[{type:0,value:"Provide WSDL"}]}))),r.createElement(he.A,null,r.createElement(be.A,null,r.createElement(m.A,{id:"Apis.Create.WSDL.ApiCreateWSDL.step.label.create.api",defaultMessage:[{type:0,value:"Create API"}]}))))),r.createElement(d.Ay,{container:!0,spacing:2},r.createElement(d.Ay,{item:!0,md:12},0===i&&r.createElement(Xe.A,{onValidate:x,apiInputs:w,inputsDispatcher:S}),1===i&&r.createElement(H,{onValidate:x,onChange:function(e){var t=e.target,n=t.name,r=t.value;S({action:n,value:r})},api:w,isAPIProduct:!1,multiGateway:c,settings:E})),r.createElement(d.Ay,{item:!0,md:12},r.createElement(d.Ay,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},r.createElement(d.Ay,{item:!0},0===i&&r.createElement(v.N_,{to:"/apis/"},r.createElement(A.A,null,r.createElement(m.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))),1===i&&r.createElement(A.A,{onClick:function(){return o((function(e){return e-1}))}},r.createElement(m.A,{id:"Apis.Create.WSDL.ApiCreateWSDL.step.label.create.api.back.btn",defaultMessage:[{type:0,value:"Back"}]}))),r.createElement(d.Ay,{item:!0},0===i&&r.createElement(A.A,{onClick:function(){return o((function(e){return e+1}))},variant:"contained",color:"primary",disabled:!w.isFormValid},r.createElement(m.A,{id:"Apis.Create.WSDL.ApiCreateWSDL.step.label.create.api.next.btn",defaultMessage:[{type:0,value:"Next"}]})),1===i&&r.createElement(A.A,{variant:"contained",color:"primary",disabled:!w.isFormValid||M,onClick:function(){D(!0);var e=w.name,t=w.version,r=w.context,a=w.endpoint,i=w.type,o={name:e,version:t,context:r,policies:y};a&&(o.endpointConfig={endpoint_type:"SOAPTOREST"===i?"address":"http",sandbox_endpoints:{type:"SOAPTOREST"===i?"address":void 0,url:a},production_endpoints:{type:"SOAPTOREST"===i?"address":void 0,url:a}}),("url"===w.inputType?_e.A.importByUrl(w.inputValue,o,w.type):_e.A.importByFileOrArchive(w.inputValue,o,w.type)).then((function(e){g.A.info(n.formatMessage({id:"Apis.Create.WSDL.ApiCreateWSDL.create.success",defaultMessage:[{type:0,value:"API created successfully"}]})),s.push("/apis/".concat(e.id,"/overview"))})).catch((function(e){e.response?g.A.error(e.response.body.description):g.A.error(n.formatMessage({id:"Apis.Create.WSDL.ApiCreateWSDL.create.error",defaultMessage:[{type:0,value:"Something went wrong while adding the API"}]})),console.error(e)})).finally((function(){return D(!1)}))}},r.createElement(m.A,{id:"Apis.Create.WSDL.ApiCreateWSDL.step.label.create.api.create.btn",defaultMessage:[{type:0,value:"Create"}]})," ",M&&r.createElement(h.A,{size:24})))))))}it.propTypes={history:u().shape({push:u().func}).isRequired};var ot=n(27601);function lt(e){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(e)}function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){ut(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ut(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=lt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==lt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return dt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ft(e){var t,n=(0,ve.A)(),a=e.multiGateway,o=pt((0,r.useState)(0),2),s=o[0],c=o[1],u=(0,i.zy)().state||{},y=u.data,P=u.settings,E=u.multiGateway,I=(0,i.W6)(),w=pt((0,r.useState)([]),2),S=w[0],x=w[1],O=(0,l.Jy)().data;O||(O=P),a||(a=E),(0,r.useEffect)((function(){b.A.policies("subscription").then((function(e){var t=e.body.list;0===t.length?g.A.info(n.formatMessage({id:"Apis.Create.GraphQL.ApiCreateGraphQL.error.policies.not.available",defaultMessage:[{type:0,value:"Throttling policies not available. Contact your administrator"}]})):t.filter((function(e){return"Unlimited"===e.name})).length>0?x(["Unlimited"]):x([t[0].name])}))}),[]);var M=pt((0,r.useReducer)((function(e,t){var n=t.action,r=t.value;switch(n){case"type":case"inputValue":case"name":case"version":case"gatewayType":case"endpoint":case"context":case"isFormValid":case"graphQLInfo":return ct(ct({},e),{},ut({},n,r));case"inputType":return ct(ct({},e),{},ut(ut({},n,r),"inputValue","url"===r||"endpoint"===r?"":null));case"preSetAPI":return ct(ct({},e),{},{name:r.name.replace(/[&/\\#,+()$~%.'":*?<>{}\s]/g,""),version:r.version,context:r.context});default:return e}}),{type:"ApiCreateGraphQL",inputType:"file",inputValue:"",formValidity:!1,gatewayType:a&&(a.filter((function(e){return"wso2/synapse"===e.value})).length>0?"wso2/synapse":null===(t=a[0])||void 0===t?void 0:t.value)}),2),D=M[0],j=M[1];function T(e){j({action:"isFormValid",value:e})}y&&0===s&&"DesignAssistant"===y.source&&(c(1),j({action:"preSetAPI",value:y}),j({action:"gatewayType",value:y.gatewayType}),j({action:"graphQLInfo",value:y.graphQLInfo}),j({action:"endpoint",value:y.endpoint}),j({action:"inputType",value:"file"}),j({action:"inputValue",value:y.file}));var L=pt((0,r.useState)(),2),W=L[0],k=L[1];return r.createElement(C,{title:r.createElement(r.Fragment,null,r.createElement(p.A,{variant:"h5"},r.createElement(m.A,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.heading",defaultMessage:[{type:0,value:"Create a GraphQL API"}]})),r.createElement(p.A,{variant:"caption"},r.createElement(m.A,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.sub.heading",defaultMessage:[{type:0,value:"Create a GraphQL API by importing a SDL definition using a file, SDL hosted URL, or by using a GraphQL endpoint."}]})))},r.createElement(f.A,{sx:{mb:2}},r.createElement(ge.A,{alternativeLabel:!0,activeStep:s},r.createElement(he.A,null,r.createElement(be.A,null,r.createElement(m.A,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.wizard.one",defaultMessage:[{type:0,value:"Provide GraphQL"}]}))),r.createElement(he.A,null,r.createElement(be.A,null,r.createElement(m.A,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.wizard.two",defaultMessage:[{type:0,value:"Create API"}]}))))),r.createElement(d.Ay,{container:!0,spacing:2},r.createElement(d.Ay,{item:!0,md:12},0===s&&r.createElement(ot.A,{onValidate:T,apiInputs:D,inputsDispatcher:j}),1===s&&r.createElement(H,{onValidate:T,onChange:function(e){var t=e.target,n=t.name,r=t.value;j({action:n,value:r})},multiGateway:a,api:D,isAPIProduct:!1,readOnlyAPIEndpoint:"endpoint"===D.inputType?D.endpoint:null,settings:O})),r.createElement(d.Ay,{item:!0,xs:12},r.createElement(d.Ay,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},r.createElement(d.Ay,{item:!0},0===s&&r.createElement(v.N_,{to:"/apis/"},r.createElement(A.A,null,r.createElement(m.A,{id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))),1===s&&(y&&"DesignAssistant"===y.source?r.createElement(A.A,{onClick:function(){I.push("/apis")}},r.createElement(m.A,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.designAssistant.back",defaultMessage:[{type:0,value:"Back"}]})):r.createElement(A.A,{onClick:function(){return c((function(e){return e-1}))}},r.createElement(m.A,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.back",defaultMessage:[{type:0,value:"Back"}]})))),r.createElement(d.Ay,{item:!0},0===s&&r.createElement(A.A,{onClick:function(){return c((function(e){return e+1}))},variant:"contained",color:"primary",disabled:!D.isFormValid,"data-testid":"create-graphql-next-btn"},r.createElement(m.A,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.next",defaultMessage:[{type:0,value:"Next"}]})),1===s&&r.createElement(A.A,{variant:"contained",color:"primary",disabled:!D.isFormValid||W,onClick:function(){k(!0);var e=D.name,t=D.version,r=D.context,a=D.endpoint,i=D.gatewayType,o=D.implementationType,l=D.inputType,s=D.inputValue,c=D.graphQLInfo.operations,u={name:e,version:t,context:r,gatewayType:i,policies:S,operations:c};a&&(u.endpointConfig={endpoint_type:"http",sandbox_endpoints:{url:a},production_endpoints:{url:a}});var p=new b.A(u),d={additionalProperties:JSON.stringify(u),implementationType:o};"file"===l?d.file=s:"url"!==l&&"endpoint"!==l||(d.schema=D.graphQLInfo.graphQLSchema.schemaDefinition),p.importGraphQL(d).then((function(t){var r=t.obj.id;g.A.info(n.formatMessage({id:"Apis.Create.GraphQL.ApiCreateGraphQL.created.success",defaultMessage:[{type:1,value:"name"},{type:0,value:" API created successfully"}]},{name:e})),I.push("/apis/".concat(r,"/overview"))})).catch((function(e){e.response?g.A.error(e.response.body.description):g.A.error(n.formatMessage({id:"Apis.Create.GraphQL.ApiCreateGraphQL.created.error",defaultMessage:[{type:0,value:"Something went wrong while adding the API"}]})),console.error(e)})).finally((function(){return k(!1)}))},"data-testid":"itest-create-graphql-api-button"},r.createElement(m.A,{id:"Apis.Create.GraphQL.ApiCreateGraphQL.create",defaultMessage:[{type:0,value:"Create"}]})," ",W&&r.createElement(h.A,{size:24})))))))}ft.propTypes={multiGateway:u().shape({content:u().string}).isRequired};const mt=function(e){var t=e.multiGateway;return r.createElement(Ae,{multiGateway:t,isWebSocket:!0})};var yt=n(17681),At=n(82241);function vt(e){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){Et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Et(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=vt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==vt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var It={mandatoryStar:"".concat("APICreateStreamingAPI","-mandatoryStar")},Ct=(0,a.Ay)(C)((function(e){var t=e.theme;return Et({},"& .".concat(It.mandatoryStar),{color:t.palette.error.main,marginLeft:t.spacing(.1)})})),wt=function e(t){var n,a=t.history,o=t.multiGateway,s=(0,ve.A)(),c=(0,l.Jy)(),u=c.data,y=c.isLoading,E=c.error,I=bt((0,r.useState)(null),2),C=I[0],S=I[1];(0,r.useEffect)((function(){E&&S(E.message)}),[E]);var x=bt((0,r.useState)(),2),O=x[0],M=x[1],D=bt((0,r.useState)(!1),2),j=D[0],T=D[1],L=bt((0,r.useState)(!1),2),W=L[0],k=L[1],V=bt((0,r.useState)(!1),2),R=V[0],F=V[1],N=bt((0,r.useState)(!1),2),G=N[0],B=N[1],_=bt((0,r.useState)([]),2),U=_[0],q=_[1],Q=(0,i.g)().apiType;Q&&(Q=Q.toUpperCase());var z="WEBSUB"===Q,J=903300;(0,r.useEffect)((function(){b.A.asyncAPIPolicies().then((function(e){var t=e.body.list;0===t.length?g.A.info(s.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.policies.not.available",defaultMessage:[{type:0,value:"Throttling policies not available. Contact your administrator"}]})):z&&t.filter((function(e){return"AsyncWHUnlimited"===e.policyName})).length>0?q(["AsyncWHUnlimited"]):!z&&t.filter((function(e){return"AsyncUnlimited"===e.policyName})).length>0?q(["AsyncUnlimited"]):q([t[0].policyName])}))}),[]);var $={WebSocket:"WS",SSE:"SSE",WebSub:"WEBSUB"},K=bt((0,r.useState)(!Q||Q===$.WebSub),2),Y=K[0],X=K[1],ee=bt((0,r.useReducer)((function(e,t){var n=t.action,r=t.value;switch(n){case"name":case"version":case"context":case"endpoint":case"policies":case"isFormValid":return ht(ht({},e),{},Et({},n,r));case"protocol":return X($[r]===$.WebSub),ht(ht({},e),{},Et({},n,$[r]));default:return e}}),{formValidity:!1,gatewayType:o&&(o.filter((function(e){return"wso2/synapse"===e.value})).length>0?"wso2/synapse":null===(n=o[0])||void 0===n?void 0:n.value)}),2),ne=ee[0],re=ee[1],ae=ne.name&&ne.context&&ne.version&&!O;function ie(e){var t=e.target,n=t.name,r=t.value;re({action:n,value:r})}function oe(){M(!0);var e=ne.name,t=ne.version,n=ne.context,r=ne.endpoint,a=ne.protocol,i={name:e,version:t,context:n,endpoint:r,type:Q||a.toUpperCase(),policies:U},o="http";return(Q&&"WS"===Q.toUpperCase()||a&&"WS"===a.toUpperCase())&&(o="ws"),r&&(i.endpointConfig={endpoint_type:o,sandbox_endpoints:{url:r},production_endpoints:{url:r}}),new b.A(i).saveStreamingAPI().then((function(e){return g.A.info(s.formatMessage({id:"Apis.Create.Default.APICreateDefault.streaming.success",defaultMessage:[{type:0,value:"API created successfully"}]})),e})).catch((function(e){e.response?g.A.error(e.response.body.description):g.A.error(s.formatMessage({id:"Apis.Create.Default.APICreateDefault.streaming.error",defaultMessage:[{type:0,value:"Something went wrong while adding the API"}]})),console.error(e),T(!1)})).finally((function(){M(!1)})).finally((function(){return M(!1)}))}var le=r.createElement(r.Fragment,null,r.createElement(p.A,{variant:"h5"},r.createElement(m.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.api.heading",defaultMessage:[{type:0,value:"Create a Streaming API"}]})),r.createElement(p.A,{variant:"caption"},z?r.createElement(m.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.websub.api.sub.heading",defaultMessage:[{type:0,value:"Create an API by providing a Name, a Version and a Context"}]}):r.createElement(m.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.api.sub.heading",defaultMessage:[{type:0,value:"Create an API by providing a Name, a Version, a Context and the Endpoint"}]})));return r.createElement(Ct,{title:le},r.createElement(d.Ay,{container:!0,direction:"row",justifyContent:"center",alignItems:"center"},C&&r.createElement(d.Ay,{item:!0,xs:11},r.createElement(P.A,{onClose:function(){return S(null)},disableActions:!0,dense:!0,paperProps:{elevation:1},type:"error",message:C})),r.createElement(d.Ay,{item:!0,xs:12},y&&r.createElement(f.A,{mt:-2},r.createElement(h.A,{"data-testid":"loading-publisher-settings"}))),r.createElement(d.Ay,{item:!0,xs:12},r.createElement(H,{onValidate:function(e){re({action:"isFormValid",value:e})},onChange:ie,api:ne,endpointPlaceholderText:"Streaming Provider",appendChildrenBeforeEndpoint:!0,hideEndpoint:Y,multiGateway:o,isWebSocket:Q&&Q===$.WebSocket||ne.protocol===$.WebSocket,settings:u},r.createElement(w.A,{fullWidth:!0,select:!0,label:r.createElement(r.Fragment,null,r.createElement(m.A,{id:"Apis.Create.streaming.Components.SelectPolicies.business.plans",defaultMessage:[{type:0,value:"Protocol"}]}),r.createElement("sup",{className:It.mandatoryStar},"*")),value:Q?{WS:"WebSocket",SSE:"SSE",WEBSUB:"WebSub"}[Q]:ne.protocol,disabled:Q,name:"protocol",SelectProps:{multiple:!1,renderValue:function(e){return e}},margin:"normal",variant:"outlined",InputProps:{id:"itest-id-apipolicies-input"},onChange:ie},[{displayName:"WebSocket",description:"WebSocket API"},{displayName:"WebSub",description:"WebHook API based on WebSub specification"},{displayName:"SSE",description:"Server-Sent Events"}].map((function(e){return r.createElement(yt.A,{dense:!0,disableGutters:!1,value:e.displayName},r.createElement(At.A,{primary:e.displayName,secondary:e.description}))}))))),r.createElement(d.Ay,{item:!0,xs:12},r.createElement(d.Ay,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},r.createElement(d.Ay,{item:!0},r.createElement(A.A,{variant:"contained",color:"primary",disabled:!(ae&&ne.isFormValid),onClick:function(){oe().then((function(e){a.push("/apis/".concat(e.id,"/overview"))}))},"data-testid":"itest-create-streaming-api-button"},r.createElement(m.A,{id:"Apis.Create.streaming.Components.create.btn",defaultMessage:[{type:0,value:"Create"}]})," ",O&&!G&&r.createElement(h.A,{size:24}))),!Z.A.isNotPublisher()&&r.createElement(d.Ay,{item:!0},r.createElement(A.A,{id:"itest-id-apicreatedefault-createnpublish",variant:"contained",color:"primary",disabled:R||W||!ae||!ne.isFormValid,onClick:function(){var t=new b.A;B(!0),oe().then((function(n){k(!0),t.createRevision(n.id,{description:"Initial Revision"}).then((function(i){var o=i.body.id;g.A.info(s.formatMessage({id:"Apis.Create.Default.APICreateDefault.streaming.revision.success",defaultMessage:[{type:0,value:"API Revision created successfully"}]})),k(!1);var l=u.environment.map((function(e){return e.name})),c=[],d=function(e){var t=u.environment.find((function(t){return t.name===e&&t.vhosts.length>0}));return t&&t.vhosts[0].host};if(u.gatewayTypes&&1===u.gatewayTypes.length)l&&l.length>0&&(l.includes("Default")&&d("Default")?c.push({name:"Default",displayOnDevportal:!0,vhost:d("Default")}):d(l[0])&&c.push({name:l[0],displayOnDevportal:!0,vhost:d(l[0])}));else{var y=u.environment,v=!1;y.forEach((function(e){!v&&"Regular"===e.gatewayType&&d(e.name)&&(c.push({name:e.name,displayOnDevportal:!0,vhost:d(e.name)}),v=!0)}))}F(!0),t.deployRevision(n.id,o,c).then((function(){g.A.info(s.formatMessage({id:"Apis.Create.Default.APICreateDefault.streaming.revision.deployed.",defaultMessage:[{type:0,value:"API Revision Deployed Successfully"}]})),F(!1),T(!0),n.publish().then((function(t){t.body.workflowStatus===e.WORKFLOW_STATUS.CREATED?g.A.info(s.formatMessage({id:"Apis.Create.Default.APICreateDefault.success.publishStatus",defaultMessage:[{type:0,value:"Lifecycle state change request has been sent"}]})):g.A.info(s.formatMessage({id:"Apis.Create.Default.APICreateDefault.success.otherStatus",defaultMessage:[{type:0,value:"API updated successfully"}]})),a.push("/apis/".concat(n.id,"/overview"))})).catch((function(e){if(e.response)if(e.response.body.code===J){var t=JSON.parse(e.response.body.description).blockingViolations;g.A.error(r.createElement(f.A,{sx:{width:"100%"}},r.createElement(p.A,null,r.createElement(m.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.error.governance.violation",defaultMessage:[{type:0,value:"Failed to publish the API due to governance violations"}]})),r.createElement(f.A,{sx:{display:"flex",justifyContent:"flex-end",mt:1}},r.createElement(A.A,{onClick:function(){return te.A.downloadAsJSON(t,"governance-violations")},sx:{color:"inherit",fontWeight:600,textDecoration:"none",transition:"all 0.3s","&:hover":{backgroundColor:"inherit",transform:"translateY(-2px)",textShadow:"0px 1px 2px rgba(0,0,0,0.2)"}}},r.createElement(m.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.error.governance.violation.download",defaultMessage:[{type:0,value:"Download Violations"}]})))))}else g.A.error(e.response.body.description),S(e.response.body);else g.A.error(s.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.errorMessage.publish",defaultMessage:[{type:0,value:"Something went wrong while publishing the API"}]})),S("Something went wrong while publishing the API");console.error(e)})).finally((function(){T(!1),B(!1)}))})).catch((function(e){if(e.response)if(e.response.body.code===J){var t=JSON.parse(e.response.body.description).blockingViolations;g.A.error(r.createElement(f.A,{sx:{width:"100%"}},r.createElement(p.A,null,r.createElement(m.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.error.governance.violation",defaultMessage:[{type:0,value:"Deployment failed due to governance violations"}]})),r.createElement(f.A,{sx:{display:"flex",justifyContent:"flex-end",mt:1}},r.createElement(A.A,{onClick:function(){return te.A.downloadAsJSON(t,"governance-violations")},sx:{color:"inherit",fontWeight:600,textDecoration:"none",transition:"all 0.3s","&:hover":{backgroundColor:"inherit",transform:"translateY(-2px)",textShadow:"0px 1px 2px rgba(0,0,0,0.2)"}}},r.createElement(m.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.error.governance.violation.download",defaultMessage:[{type:0,value:"Download Violations"}]})))))}else g.A.error(e.response.body.description),S(e.response.body);else g.A.error(s.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.errorMessage.deploy.revision",defaultMessage:[{type:0,value:"Something went wrong while deploying the API Revision"}]})),S("Something went wrong while deploying the API Revision");console.error(e)})).finally((function(){F(!1)}))})).catch((function(e){if(e.response)if(e.response.body.code===J){var t=JSON.parse(e.response.body.description).blockingViolations;g.A.error(r.createElement(f.A,{sx:{width:"100%"}},r.createElement(p.A,null,r.createElement(m.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.error.governance.violation",defaultMessage:[{type:0,value:"Failed to create the API Revision due to governance violations"}]})),r.createElement(f.A,{sx:{display:"flex",justifyContent:"flex-end",mt:1}},r.createElement(A.A,{onClick:function(){return te.A.downloadAsJSON(t,"governance-violations")},sx:{color:"inherit",fontWeight:600,textDecoration:"none",transition:"all 0.3s","&:hover":{backgroundColor:"inherit",transform:"translateY(-2px)",textShadow:"0px 1px 2px rgba(0,0,0,0.2)"}}},r.createElement(m.A,{id:"Apis.Create.StreamingAPI.APICreateStreamingAPI.error.governance.violation.download",defaultMessage:[{type:0,value:"Download Violations"}]})))))}else g.A.error(e.response.body.description),S(e.response.body);else g.A.error(s.formatMessage({id:"Apis.Create.Default.APICreateDefault.error.errorMessage.create.revision",defaultMessage:[{type:0,value:"Something went wrong while creating the API Revision"}]})),S("Something went wrong while creating the API Revision");console.error(e)})).finally((function(){k(!1)}))}))}},!j&&!W&&!R&&r.createElement(m.A,{id:"Apis.Create.streaming.Components.create.and.publish.btn",defaultMessage:[{type:0,value:"Create & Publish"}]}),(j||W||R)&&r.createElement(h.A,{size:24}),O&&j&&"Creating API . . .",!O&&W&&!R&&"Creating Revision . . .",!O&&j&&!W&&!R&&"Publishing API . . .",!O&&j&&!W&&R&&"Deploying Revision . . .")),r.createElement(d.Ay,{item:!0},r.createElement(v.N_,{to:"/apis/"},r.createElement(A.A,{variant:"text"},r.createElement(m.A,{id:"Apis.Create.Default.APICreateDefault.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))))))))};wt.WORKFLOW_STATUS={CREATED:"CREATED"};const St=(0,i.y)(wt);var xt=n(87070),Ot=n.n(xt),Mt=n(57555),Dt=n(4531);const jt=function(e){var t=e.classes,n=e.apiInputs,a=e.inputsDispatcher,i=e.isValidExternalEndpoint,o=e.setValidExternalEndpoint,l=e.validateEndpoint;return r.createElement(r.Fragment,null,r.createElement(w.A,{fullWidth:!0,id:"itest-id-api-external-endpoint-input",label:r.createElement(r.Fragment,null,r.createElement(m.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.externalEndpoint",defaultMessage:[{type:0,value:"External Endpoint"}]}),r.createElement("sup",{className:t.mandatoryStar},"*")),name:"externalEndpoint",value:n.externalEndpoint,onChange:function(e){var t=e.target,n=t.name,r=t.value;o(l(r)),a({action:n,value:r})},helperText:!i&&r.createElement("div",{style:{marginTop:"10px"}},r.createElement(m.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.externalEndpoint.error",defaultMessage:[{type:0,value:"Invalid Endpoint URL"}]})),error:!i,margin:"normal",variant:"outlined"}),r.createElement(Dt.A,{severity:"warning",className:t.externalEndpointWarning},r.createElement(p.A,{gutterBottom:!0,component:"div",className:t.alertTitle},r.createElement(m.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.advertiseOnly.warning.title",defaultMessage:[{type:0,value:'"Other" type streaming APIs will be created as third party APIs.'}]})),r.createElement(m.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.advertiseOnly.warning",defaultMessage:[{type:0,value:"API Manager only supports the streaming APIs of types WebSocket, SSE and WebSub. Please create one of the supported types if you want to deploy it in the gateway."}]})))};var Tt=n(84999);function Lt(e){return Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lt(e)}function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){Ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Rt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ft(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Lt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Lt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nt="ApiCreateAsyncAPI",Gt={mandatoryStar:"".concat(Nt,"-mandatoryStar"),externalEndpointWarning:"".concat(Nt,"-externalEndpointWarning"),alertTitle:"".concat(Nt,"-alertTitle")},Bt=(0,a.Ay)(C)((function(e){var t=e.theme;return Ft(Ft(Ft({},"& .".concat(Gt.mandatoryStar),{color:t.palette.error.main,marginLeft:t.spacing(.1)}),"& .".concat(Gt.externalEndpointWarning),{marginTop:t.spacing(2),marginBottom:t.spacing(2)}),"& .".concat(Gt.alertTitle),{fontWeight:t.typography.fontWeightMedium,marginTop:-2})}));function _t(e){var t,n=Vt((0,r.useState)(0),2),a=n[0],o=n[1],s=(0,i.zy)().state||{},c=s.data,u=s.settings,y=s.multiGateway,P=e.history,E=e.multiGateway,I=(0,l.Jy)().data;I||(I=u),E||(E=y);var C=Vt((0,r.useState)(!0),2),S=C[0],x=C[1],O=Vt((0,r.useState)(!0),2),M=O[0],D=O[1],j=Vt((0,r.useState)(!0),2),L=j[0],W=j[1],k=(0,ve.A)(),V=Vt((0,r.useReducer)((function(e,t){var n=t.action,r=t.value;switch(n){case"type":case"inputValue":case"name":case"version":case"endpoint":case"gatewayVendor":case"asyncTransportProtocols":case"protocol":case"context":case"policies":case"isFormValid":case"externalEndpoint":return kt(kt({},e),{},Ft({},n,r));case"inputType":return kt(kt({},e),{},Ft(Ft({},n,r),"inputValue","url"===r?"":null));case"preSetAPI":return kt(kt({},e),{},{name:r.name.replace(/[&/\\#,+()$~%.'":*?<>{}\s]/g,""),version:r.version,context:r.context,endpoint:r.endpoints&&r.endpoints[0],gatewayVendor:r.gatewayVendor,asyncTransportProtocols:r.asyncTransportProtocols});default:return e}}),{type:"ApiCreateAsyncAPI",inputType:"url",inputValue:"",formValidity:!1,gatewayType:E&&(E.filter((function(e){return"wso2/synapse"===e.value})).length>0?"wso2/synapse":null===(t=E[0])||void 0===t?void 0:t.value)}),2),R=V[0],F=V[1];c&&0===a&&"DesignAssistant"===c.source&&(o(1),F({action:"preSetAPI",value:c}),F({action:"protocol",value:c.protocol}),F({action:"endpoint",value:c.endpoint}),F({action:"inputType",value:"file"}),F({action:"inputValue",value:c.file}));var N={WebSocket:"WS",SSE:"SSE",WebSub:"WEBSUB",Other:"ASYNC"};function G(e){return!!e&&!Ot().string().uri().empty().validate(e).error}function B(e){F({action:"isFormValid",value:e})}var _=Vt((0,r.useState)(),2),U=_[0],q=_[1];return r.createElement(Bt,{title:r.createElement(r.Fragment,null,r.createElement(p.A,{variant:"h5"},r.createElement(m.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.heading",defaultMessage:[{type:0,value:"Create an API using an AsyncAPI definition."}]})),r.createElement(p.A,{variant:"caption"},r.createElement(m.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.sub.heading",defaultMessage:[{type:0,value:"Create an API using an existing AsyncAPI definition file or URL."}]})))},r.createElement(f.A,{sx:{mb:2}},r.createElement(ge.A,{alternativeLabel:!0,activeStep:a},r.createElement(he.A,null,r.createElement(be.A,null,r.createElement(m.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.wizard.one",defaultMessage:[{type:0,value:"Provide AsyncAPI"}]}))),r.createElement(he.A,null,r.createElement(be.A,null,r.createElement(m.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.wizard.two",defaultMessage:[{type:0,value:"Create API"}]}))))),r.createElement(d.Ay,{container:!0,spacing:2},r.createElement(d.Ay,{item:!0,xs:12},0===a&&r.createElement(Tt.A,{onValidate:B,apiInputs:R,inputsDispatcher:F}),1===a&&r.createElement(H,{onValidate:B,onChange:function(e){var t=e.target,n=t.name,r=t.value;F({action:n,value:r})},api:R,isAPIProduct:!1,hideEndpoint:S,endpointPlaceholderText:"Streaming Provider",appendChildrenBeforeEndpoint:!0,multiGateway:E,settings:I},r.createElement(d.Ay,{container:!0,spacing:2},"solace"===R.gatewayVendor&&0!==R.asyncTransportProtocols.length&&r.createElement(r.Fragment,null,r.createElement(d.Ay,{item:!0,xs:12,md:6,lg:3},r.createElement(p.A,{component:"p",variant:"subtitle2"},r.createElement(m.A,{id:"Apis.Details.NewOverview.MetaData.solace.transports",defaultMessage:[{type:0,value:"Available Protocols"}]}))),r.createElement(d.Ay,{item:!0,xs:12,md:6,lg:9},R.asyncTransportProtocols.map((function(e){return r.createElement(T.A,{"data-testid":(0,Mt.mf)(e)+"-label",key:e,label:(0,Mt.mf)(e),style:{"font-size":13,height:20,marginRight:5},color:"primary"})}))))),"wso2"===R.gatewayVendor&&r.createElement(w.A,{fullWidth:!0,select:!0,label:r.createElement(r.Fragment,null,r.createElement(m.A,{id:"Apis.Create.asyncAPI.Components.SelectPolicies.business.plans",defaultMessage:[{type:0,value:"Protocol"}]}),r.createElement("sup",{className:Gt.mandatoryStar},"*")),value:R.protocol,name:"protocol",SelectProps:{multiple:!1,renderValue:function(e){return e}},margin:"normal",variant:"outlined",InputProps:{id:"itest-id-apipolicies-input"},onChange:function(e){var t=e.target,n=t.name,r=t.value;"WebSub"===r?(x(!0),D(!0),W(!0)):"Other"===r?(x(!0),D(!1),W(G(R.externalEndpoint))):(x(!1),D(!0),W(!0)),F({action:n,value:r})}},[{name:"ws",displayName:"WebSocket",description:"WebSocket API"},{name:"websub",displayName:"WebSub",description:"WebHook API based on WebSub specification"},{name:"sse",displayName:"SSE",description:"Server-Sent Events"},{name:"other",displayName:"Other",description:"Other Async APIs such as AMQP, MQTT etc."}].map((function(e){return r.createElement(yt.A,{dense:!0,disableGutters:!1,id:e.name,key:e.name,value:e.displayName},r.createElement(At.A,{primary:e.displayName,secondary:e.description}))}))),!M&&r.createElement(jt,{classes:Gt,apiInputs:R,inputsDispatcher:F,isValidExternalEndpoint:L,setValidExternalEndpoint:W,validateEndpoint:G}))),r.createElement(d.Ay,{item:!0,xs:12},r.createElement(d.Ay,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},r.createElement(d.Ay,{item:!0},0===a&&r.createElement(v.N_,{to:"/apis/"},r.createElement(A.A,null,r.createElement(m.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))),1===a&&(c&&"DesignAssistant"===c.source?r.createElement(A.A,{onClick:function(){P.push("/apis")}},r.createElement(m.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.designAssistant.back",defaultMessage:[{type:0,value:"Back"}]})):r.createElement(A.A,{onClick:function(){return o((function(e){return e-1}))}},r.createElement(m.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.back",defaultMessage:[{type:0,value:"Back"}]})))),r.createElement(d.Ay,{item:!0},0===a&&r.createElement(A.A,{"data-testid":"next-btn",onClick:function(){return o((function(e){return e+1}))},variant:"contained",color:"primary",disabled:!R.isFormValid},r.createElement(m.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.next",defaultMessage:[{type:0,value:"Next"}]})),1===a&&r.createElement(A.A,{"data-testid":"asyncapi-create-btn",variant:"contained",color:"primary",disabled:!R.isFormValid||U||!L,onClick:function(){q(!0);var e=R.name,t=R.version,n=R.context,r=R.endpoint,a=R.policies,i=R.inputValue,o=R.inputType,l=R.protocol,s=R.gatewayVendor,c=R.externalEndpoint,u={name:e,version:t,context:n,policies:a,type:N[l],gatewayVendor:s};"solace"===s&&(u.type=N.WebSub),r&&(u.endpointConfig={endpoint_type:"http",sandbox_endpoints:{url:r},production_endpoints:{url:r}}),"ASYNC"===N[l]&&(u.advertiseInfo={advertised:!0,apiExternalProductionEndpoint:c,apiExternalSandboxEndpoint:c,originalDevPortalUrl:"",apiOwner:"admin",vendor:"WSO2"});var p=new b.A(u);("file"===o?p.importAsyncAPIByFile(i):p.importAsyncAPIByUrl(i)).then((function(e){g.A.info(k.formatMessage({id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.created.success",defaultMessage:[{type:0,value:"API created successfully"}]})),P.push("/apis/".concat(e.id,"/overview"))})).catch((function(e){e.response?g.A.error(e.response.body.description):g.A.error(k.formatMessage({id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.created.error",defaultMessage:[{type:0,value:"Something went wrong while adding the API"}]})),console.error(e)})).finally((function(){return q(!1)}))}},r.createElement(m.A,{id:"Apis.Create.AsyncAPI.ApiCreateAsyncAPI.create",defaultMessage:[{type:0,value:"Create"}]})," ",U&&r.createElement(h.A,{size:24})))))))}_t.propTypes={history:u().shape({push:u().func}).isRequired};var Ut=n(6652),qt=n(15956);function Qt(e){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(e)}function zt(){return zt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zt.apply(null,arguments)}function Jt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $t(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$t(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Kt={mandatoryStar:"".concat("ProvideAIOpenAPI","-mandatoryStar")},Yt=(0,a.Ay)("div")((function(e){var t=e.theme;return function(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Qt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},"& .".concat(Kt.mandatoryStar),{color:t.palette.error.main})}));function Ht(e){var t=e.inputsDispatcher,n=e.onValidate,a=Jt((0,r.useState)(null),2),i=a[0],o=a[1],l=Jt((0,r.useState)(null),2),s=l[0],c=l[1],u=Jt((0,r.useState)(null),2),f=u[0],y=u[1],A=(0,ve.A)();return(0,r.useEffect)((function(){y(null),t({action:"importingContent",value:null}),t({action:"inputValue",value:null}),t({action:"isFormValid",value:!1})}),[s]),(0,r.useEffect)((function(){b.A.getLLMProviders().then((function(e){o(e.body)})).catch((function(e){e.response?g.A.error(e.response.body.description):g.A.error(A.formatMessage({id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.LLM.Provider.fetch.error",defaultMessage:[{type:0,value:"Something went wrong while fetching LLM Providers"}]}))}))}),[]),r.createElement(Yt,null,i&&r.createElement(d.Ay,{container:!0},r.createElement(d.Ay,{item:!0,xs:12,sx:{mb:2}},r.createElement(W.A,{component:"fieldset",sx:{width:"100%"}},r.createElement(V.A,{component:"legend",sx:{width:"100%"}},r.createElement(qt.A,{fullWidth:!0,id:"AI-providers-autocomplete",options:function(e){if(!e)return[];var t=[];return e.list.forEach((function(e){t.includes(e.name)||t.push(e.name)})),t}(i),noOptionsText:"No AI/LLM Service Provider defined",value:s,onChange:function(e,t){c(t)},renderOption:function(e,t){return r.createElement("li",e,t)},renderInput:function(e){return r.createElement(w.A,zt({},e,{fullWidth:!0,label:0!==i.list.length?r.createElement(r.Fragment,null,r.createElement(m.A,{id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.provider",defaultMessage:[{type:0,value:"AI/LLM Service Provider"}]}),r.createElement("sup",{className:Kt.mandatoryStar},"*")):r.createElement(m.A,{id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.provider.empty",defaultMessage:[{type:0,value:"No AI/LLM Service Provider defined."}]}),placeholder:A.formatMessage({id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.provider.placeholder",defaultMessage:[{type:0,value:"Search AI/LLM Service Provider"}]}),helperText:r.createElement(m.A,{id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.provider.helper.text",defaultMessage:[{type:0,value:"Select AI/LLM Service Provider for the API"}]}),margin:"dense",variant:"outlined",id:"APIProvider"}))}})))),r.createElement(d.Ay,{item:!0,xs:12,sx:{mb:2}},r.createElement(W.A,{component:"fieldset",sx:{width:"100%"}},r.createElement(V.A,{component:"legend",sx:{width:"100%"}},r.createElement(qt.A,{fullWidth:!0,id:"AI-model-autocomplete",options:i.list.filter((function(e){return e.name===s})),noOptionsText:"No AI/LLM Service Provider selected",getOptionLabel:function(e){return e.apiVersion},value:f,onChange:function(e,r){y(r),r?b.A.getLLMProviderAPIDefinition(r.id).then((function(e){!function(e,r){var a=e.text;b.A.validateOpenAPIByInlineDefinition(a).then((function(e){if(!e.body.isValid)throw new Error("Invalid OpenAPI definition");t({action:"llmProviderId",value:r.id}),t({action:"inputValue",value:a}),t({action:"preSetAPI",value:e.body.info}),n(e.body.isValid)})).catch((function(e){e.response?g.A.error(e.response.body.description):g.A.error(A.formatMessage({id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.LLMProvider.API.Definition.validation.failure.error",defaultMessage:[{type:0,value:"Error while validating the LLM Provider API Definition"}]})),t({action:"inputValue",value:null}),t({action:"isFormValid",value:!1}),n(!1)}))}(e,r)})).catch((function(e){e.response?g.A.error(e.response.body.description):g.A.error(A.formatMessage({id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.LLMProvider.API.Definition.fetch.error",defaultMessage:[{type:0,value:"Something went wrong while fetching LLM Provider API Definition"}]}))})):t({action:"isFormValid",value:!1})},renderOption:function(e,t){return r.createElement("li",e,t.apiVersion)},renderInput:function(e){return r.createElement(w.A,zt({},e,{fullWidth:!0,label:0!==i.list.length?r.createElement(r.Fragment,null,r.createElement(m.A,{id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.model",defaultMessage:[{type:0,value:"API version"}]}),r.createElement("sup",{className:Kt.mandatoryStar},"*")):r.createElement(m.A,{id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.model.empty",defaultMessage:[{type:0,value:"No AI/LLM Service Provider selected."}]}),placeholder:A.formatMessage({id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.model.placeholder",defaultMessage:[{type:0,value:"Search API version"}]}),helperText:r.createElement(m.A,{id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.model.helper",defaultMessage:[{type:0,value:"Select API version for the API"}]}),margin:"dense",variant:"outlined",id:"APIModelVersion"}))}})))),r.createElement(d.Ay,{container:!0,direction:"row",justifyContent:"flex-end",alignItems:"center"},r.createElement(d.Ay,{item:!0},r.createElement(p.A,{variant:"caption",display:"block",gutterBottom:!0},r.createElement("sup",{style:{color:"red"}},"*")," ",r.createElement(m.A,{id:"Apis.Create.Components.DefaultAPIForm.mandatory.fields",defaultMessage:[{type:0,value:"Mandatory fields"}]}))))),!i&&r.createElement(d.Ay,{container:!0},r.createElement(d.Ay,{item:!0,xs:12,sx:{mb:2}},r.createElement(p.A,null,r.createElement(m.A,{id:"Apis.Create.AIAPI.Steps.ProvideAIOpenAPI.AI.provider.loading",defaultMessage:[{type:0,value:"Loading AI/LLM Service Providers..."}]})))))}function Xt(e){return Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(e)}function Zt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return en(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?en(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(n),!0).forEach((function(t){rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rn(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Xt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=Xt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Xt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function an(e,t){var n=t.action,r=t.value;switch(n){case"type":case"inputValue":case"name":case"version":case"endpoint":case"gatewayType":case"context":case"policies":case"llmProviderId":case"isFormValid":return nn(nn({},e),{},rn({},n,r));case"preSetAPI":return nn(nn({},e),{},{name:r.name.replace(/[&/\\#,+()$~%.'":*?<>{}\s]/g,""),version:r.version,context:r.context,endpoint:r.endpoints&&r.endpoints[0]});default:return e}}function on(e){var t,n=Zt((0,r.useState)(0),2),a=n[0],i=n[1],o=e.history,s=e.multiGateway,c=(0,l.Jy)().data,u=Zt((0,r.useReducer)(an,{type:"ApiCreateAIAPI",inputValue:"",formValidity:!1,gatewayType:s&&(s.filter((function(e){return"wso2/synapse"===e.value})).length>0?"wso2/synapse":null===(t=s[0])||void 0===t?void 0:t.value)}),2),y=u[0],P=u[1],E=(0,ve.A)();function I(e){P({action:"isFormValid",value:e})}var w=Zt((0,r.useState)(),2),S=w[0],x=w[1];return r.createElement(C,{title:r.createElement(r.Fragment,null,r.createElement(p.A,{variant:"h5"},r.createElement(m.A,{id:"Apis.Create.AIAPI.ApiCreateAIAPI.heading",defaultMessage:[{type:0,value:"Create an API using an AI/LLM Service provider API definition."}]})),r.createElement(p.A,{variant:"caption"},r.createElement(m.A,{id:"Apis.Create.AIAPI.ApiCreateAIAPI.sub.heading",defaultMessage:[{type:0,value:"Create an API using an existing AI/LLM Service provider API definition."}]})))},r.createElement(f.A,{sx:{mb:2}},r.createElement(ge.A,{alternativeLabel:!0,activeStep:a},r.createElement(he.A,null,r.createElement(be.A,null,r.createElement(m.A,{id:"Apis.Create.AIAPI.ApiCreateAIAPI.wizard.one",defaultMessage:[{type:0,value:"Provide AI/LLM Service provider API"}]}))),r.createElement(he.A,null,r.createElement(be.A,null,r.createElement(m.A,{id:"Apis.Create.AIAPI.ApiCreateAIAPI.wizard.two",defaultMessage:[{type:0,value:"Create API"}]}))))),r.createElement(d.Ay,{container:!0,spacing:2},r.createElement(d.Ay,{item:!0,xs:12},0===a&&r.createElement(Ht,{onValidate:I,inputsDispatcher:P}),1===a&&r.createElement(H,{onValidate:I,onChange:function(e){var t=e.target,n=t.name,r=t.value;P({action:n,value:r})},multiGateway:s,api:y,isAPIProduct:!1,hideEndpoint:!0,settings:c})),r.createElement(d.Ay,{item:!0,xs:12},r.createElement(d.Ay,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2},r.createElement(d.Ay,{item:!0},0===a&&r.createElement(v.N_,{to:"/apis/"},r.createElement(A.A,null,r.createElement(m.A,{id:"Apis.Create.AIAPI.ApiCreateAIAPI.cancel",defaultMessage:[{type:0,value:"Cancel"}]}))),1===a&&r.createElement(A.A,{onClick:function(){return i((function(e){return e-1}))}},r.createElement(m.A,{id:"Apis.Create.AIAPI.ApiCreateAIAPI.back",defaultMessage:[{type:0,value:"Back"}]}))),r.createElement(d.Ay,{item:!0},0===a&&r.createElement(A.A,{onClick:function(){return i((function(e){return e+1}))},variant:"contained",color:"primary",disabled:!y.isFormValid,id:"ai-api-create-next-btn"},r.createElement(m.A,{id:"Apis.Create.AIAPI.ApiCreateAIAPI.next",defaultMessage:[{type:0,value:"Next"}]})),1===a&&r.createElement(A.A,{variant:"contained",color:"primary",disabled:!y.isFormValid||S,onClick:function(){x(!0);var e=y.name,t=y.version,n=y.context,r=y.endpoint,a=y.gatewayType,i=y.policies,l=void 0===i?["Unlimited"]:i,s=y.inputValue,c={name:e,version:t,context:n,gatewayType:a,policies:l,subtypeConfiguration:{subtype:"AIAPI",configuration:{llmProviderId:y.llmProviderId}},securityScheme:[Ut.pg],egress:!0};r&&(c.endpointConfig={endpoint_type:"http",sandbox_endpoints:{url:r},production_endpoints:{url:r}}),new b.A(c).importOpenAPIByInlineDefinition(s).then((function(e){g.A.info(E.formatMessage({id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.created.success",defaultMessage:[{type:0,value:"API created successfully"}]})),o.push("/apis/".concat(e.id,"/overview"))})).catch((function(e){e.response?g.A.error(e.response.body.description):g.A.error(E.formatMessage({id:"Apis.Create.OpenAPI.ApiCreateOpenAPI.created.error",defaultMessage:[{type:0,value:"Something went wrong while adding the API"}]}))})).finally((function(){return x(!1)}))},id:"ai-api-create-btn"},r.createElement(m.A,{id:"Apis.Create.AIAPI.ApiCreateAIAPI.create",defaultMessage:[{type:0,value:"Create"}]})," ",S&&r.createElement(h.A,{size:24})))))))}function ln(e){return ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ln(e)}function sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return cn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function un(){return un=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},un.apply(null,arguments)}Ht.defaultProps={onValidate:function(){}},Ht.propTypes={inputsDispatcher:u().func.isRequired,onValidate:u().func},on.propTypes={history:u().shape({push:u().func}).isRequired,multiGateway:u().string.isRequired};var pn,dn,fn,mn={content:"".concat("APICreateRoutes","-content")},yn=(0,a.Ay)("div")((pn={},fn={flexGrow:1},(dn=function(e){var t=function(e,t){if("object"!=ln(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=ln(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ln(t)?t:t+""}(dn="&.".concat(mn.content)))in pn?Object.defineProperty(pn,dn,{value:fn,enumerable:!0,configurable:!0,writable:!0}):pn[dn]=fn,pn)),An={"wso2/synapse":{value:"wso2/synapse",name:"Universal Gateway",description:"API gateway embedded in APIM runtime.",isNew:!1},"wso2/apk":{value:"wso2/apk",name:"Kubernetes Gateway",description:"API gateway running on Kubernetes.",isNew:!1},AWS:{value:"AWS",name:"AWS Gateway",description:"API gateway offered by AWS cloud.",isNew:!0}},vn=function(e,t){return function(n){return r.createElement(e,un({},n,t))}};const gn=function(){var e=(0,l.Jy)(),t=e.data,n=e.isLoading,a=sn((0,r.useState)(null),2),c=a[0],u=a[1],p=sn((0,r.useState)(null),2),d=p[0],f=p[1];return(0,r.useEffect)((function(){if(!n){u(t.gatewayFeatureCatalog.apiTypes);var e=t.gatewayTypes.map((function(e){return"Regular"===e?"wso2/synapse":"APK"===e?"wso2/apk":e}));f(e)}}),[n]),n?r.createElement(s.ke,{per:80,message:"Loading app settings ..."}):r.createElement(yn,{className:mn.content},r.createElement(i.dO,null,r.createElement(i.qh,{path:"/apis/create/rest",component:vn(Ae,{multiGateway:null==c?void 0:c.rest.filter((function(e){return d.includes(e)})).map((function(e){return An[e]}))})}),r.createElement(i.qh,{path:"/api-products/create",component:Te}),r.createElement(i.qh,{path:"/apis/create/graphQL",component:vn(ft,{multiGateway:null==c?void 0:c.graphql.filter((function(e){return d.includes(e)})).map((function(e){return An[e]}))})}),r.createElement(i.qh,{path:"/apis/create/openapi",component:vn(Be,{multiGateway:null==c?void 0:c.rest.filter((function(e){return d.includes(e)})).map((function(e){return An[e]}))})}),r.createElement(i.qh,{path:"/apis/create/wsdl",component:vn(it,{multiGateway:null==c?void 0:c.soap.filter((function(e){return d.includes(e)})).map((function(e){return An[e]}))})}),r.createElement(i.qh,{path:"/apis/create/ws",component:vn(mt,{multiGateway:null==c?void 0:c.ws.filter((function(e){return d.includes(e)})).map((function(e){return An[e]}))})}),r.createElement(i.qh,{path:"/apis/create/streamingapi/:apiType",component:vn(St,{multiGateway:null==c?void 0:c.ws.filter((function(e){return d.includes(e)})).map((function(e){return An[e]}))})}),r.createElement(i.qh,{path:"/apis/create/asyncapi",component:vn(_t,{multiGateway:null==c?void 0:c.ws.filter((function(e){return d.includes(e)})).map((function(e){return An[e]}))})}),r.createElement(i.qh,{path:"/apis/create/ai-api",component:vn(on,{multiGateway:null==c?void 0:c.ai.filter((function(e){return d.includes(e)})).map((function(e){return An[e]}))})}),r.createElement(i.qh,{component:o.A})))}}}]);
//# sourceMappingURL=APICreateRoutes.9aa9f232ac8cfb89e8e5.bundle.js.map