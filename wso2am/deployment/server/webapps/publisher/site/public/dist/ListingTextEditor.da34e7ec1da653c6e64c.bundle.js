"use strict";(this.webpackChunk_wso2apim_publisher=this.webpackChunk_wso2apim_publisher||[]).push([[523],{21054:(e,t,n)=>{n.r(t),n.d(t,{default:()=>W});var r=n(96540),a=n(11848),o=n(56347),i=n(58065),c=n(38798),l=n(5556),s=n.n(l),u=n(74010),p=n(58031),d=n(19455),f=n(33551),m=n(48875),y=n(92728),A=n(34339),b=n(35143),h=n(43754),v=n(29987),E=n.n(v),g=n(47340),S=n.n(g),C=n(4686),w=n(14739),T=n(84712),x=n(29747),N=n(90431),I=n(73357);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,c=[],l=!0,s=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){s=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P.apply(null,arguments)}function k(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=O(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M="TextEditor",R={appBar:"".concat(M,"-appBar"),flex:"".concat(M,"-flex"),popupHeader:"".concat(M,"-popupHeader"),splitWrapper:"".concat(M,"-splitWrapper"),docName:"".concat(M,"-docName"),button:"".concat(M,"-button")},q=(0,a.Ay)(p.A)(k(k(k(k(k(k({},"& .".concat(R.appBar),{position:"relative"}),"& .".concat(R.flex),{flex:1}),"& .".concat(R.popupHeader),{display:"flex",flexDirection:"row",alignItems:"center"}),"& .".concat(R.splitWrapper),{padding:0,height:"calc(100vh - 64px)",overflow:"hidden"}),"& .".concat(R.docName),{alignItems:"center",display:"flex"}),"& .".concat(R.button),{height:30,marginLeft:30}));function _(e){return r.createElement(m.A,P({direction:"up"},e))}function B(e){var t=this,n=e.intl,a=(e.apiType,e.showAtOnce),o=e.history,c=e.docId,l=(0,r.useContext)(x.Ay),s=l.api,p=l.isAPIProduct,m=D((0,r.useState)(a),2),v=m[0],g=m[1],O=D((0,r.useState)(b.EditorState.createEmpty()),2),j=O[0],P=O[1],k=D((0,r.useState)(!1),2),M=k[0],B=k[1],W=function(){if(v||H(),v&&a){var e="/".concat(p?"api-products":"apis","/").concat(s.id,"/documents");o.push(e)}g(!v)},H=function(){(p?new w.A:new C.A).getInlineContentOfDocument(s.id,c).then((function(e){var t=S()(e.text);if(t){var n=b.ContentState.createFromBlockArray(t.contentBlocks),r=b.EditorState.createWithContent(n);P(r)}})).catch((function(e){404===e.status&&t.setState({apiNotFound:!0})}))},z=e.docName;return r.createElement("div",null,r.createElement(u.A,{onClick:W,disabled:(0,N.E)(["apim:api_create","apim:api_publish"],s)||s.isRevision,"aria-label":"Edit Content of "+z},r.createElement(y.A,null,"description"),r.createElement(i.A,{id:"Apis.Details.Documents.TextEditor.edit.content",defaultMessage:[{type:0,value:"Edit Content"}]})),r.createElement(q,{fullScreen:!0,open:v,onClose:W,TransitionComponent:_},r.createElement(A.A,{square:!0,className:R.popupHeader},r.createElement(d.A,{color:"inherit",onClick:W,"aria-label":"Close",size:"large"},r.createElement(y.A,null,"close")),r.createElement(f.A,{variant:"h4",className:R.docName},r.createElement(i.A,{id:"Apis.Details.Documents.TextEditor.edit.content.of",defaultMessage:[{type:0,value:"Edit Content of"}]})," ",'"',z,'"'),r.createElement(u.A,{className:R.button,variant:"contained",disabled:M,color:"primary",onClick:function(){var e=p?new w.A:new C.A;B(!0);var t=E()((0,b.convertToRaw)(j.getCurrentContent()));e.addInlineContentToDocument(s.id,c,"INLINE",t).then((function(e){T.A.info("".concat(e.obj.name," ").concat(n.formatMessage({id:"Apis.Details.Documents.TextEditor.update.success.message",defaultMessage:[{type:0,value:"updated successfully."}]}))),W(),B(!1)})).catch((function(e){T.A.error("".concat(e," ").concat(n.formatMessage({id:"Apis.Details.Documents.TextEditor.update.error.message",defaultMessage:[{type:0,value:"update failed."}]}))),B(!1)}))}},r.createElement(i.A,{id:"Apis.Details.Documents.TextEditor.update.content.button",defaultMessage:[{type:0,value:"Update Content"}]}),M&&r.createElement(I.A,{size:24})),r.createElement(u.A,{className:R.button,onClick:W},r.createElement(i.A,{id:"Apis.Details.Documents.TextEditor.cancel.button",defaultMessage:[{type:0,value:"Cancel"}]}))),r.createElement("div",{className:R.splitWrapper},r.createElement(h.Editor,{editorState:j,wrapperClassName:"draftjs-wrapper",editorClassName:"draftjs-editor",editorStyle:{height:"calc(100vh - 128px)",overflowY:"auto"},onEditorStateChange:function(e){P(e)}}))))}B.propTypes={classes:s().shape({}).isRequired,docId:s().string.isRequired,apiType:s().oneOf([C.A.CONSTS.API,C.A.CONSTS.APIProduct]).isRequired,intl:s().shape({}).isRequired,showAtOnce:s().bool.isRequired,api:s().shape({id:s().string,apiType:s().oneOf([C.A.CONSTS.API,C.A.CONSTS.APIProduct])}).isRequired};const W=(0,c.Ay)((0,o.y)(B))}}]);
//# sourceMappingURL=ListingTextEditor.da34e7ec1da653c6e64c.bundle.js.map