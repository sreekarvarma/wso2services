"use strict";(this.webpackChunk_wso2apim_devportal=this.webpackChunk_wso2apim_devportal||[]).push([[2082],{32082:(e,t,n)=>{n.r(t),n.d(t,{default:()=>V});var a=n(96540),o=n(11848),r=n(34339),i=n(5556),s=n.n(i),l=n(99020),c=n(33551),d=n(6442),p=n(58065),u=n(32997),m=n(92728),b=n(84712),A=n(78874),f=n(53036),g=n(51989),h=n(85877),y=n(1710),E=n(16576),x=n(48719),C=n(72048),v=n(41750),S=n(84798),w=n(1043),$=n(53215),I=n(44675),k=n(41340),P=n(1403),T=n(94877),R=n(58603);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e,t){let{field:n,value:a}=t;return O(O({},e),{},{[n]:a})}const D=function(e){const t=(0,d.A)(),n=e.topic.type.toLowerCase(),o="publish"===n||"subscribe"===n?n.substr(0,3):n,r=(0,I.A)(),i=r.custom.resourceChipColors[o],{generateGenericWHSubscriptionCurl:s,topic:u}=e,m={topic:u.name,secret:null,lease:5e4,mode:"subscribe",callback:null},[A,f]=(0,a.useState)(s(m)),[g,h]=(0,a.useState)(!1),[U,O]=(0,a.useReducer)(z,m),H=e=>{O({field:e.target.name,value:e.target.value})};return a.createElement(y.A,{sx:{marginBottom:"10px",border:`1px solid ${i}`}},a.createElement(x.A,{expandIcon:a.createElement(C.A,null),"aria-controls":"wh-subscription-content",id:"wh-subscription-header",sx:{backgroundColor:T.A.hexToRGBA(i,.1),maxHeight:"40px",borderColor:"#80bdff","&$expanded":{maxHeight:"40px"}}},a.createElement(l.Ay,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0},a.createElement(l.Ay,{item:!0,md:11},a.createElement(R.A,{invisible:"false",color:"error",variant:"dot"},a.createElement(S.A,{disableFocusRipple:!0,variant:"outlined",size:"small",sx:{backgroundColor:"#ffffff",borderColor:i,color:i,width:r.spacing(2)}},o.toUpperCase())),a.createElement(c.A,{display:"inline",style:{margin:"0px 30px"},gutterBottom:!0},u.name)))),a.createElement(E.A,null,a.createElement(l.Ay,{container:!0,direction:"column",wrap:"nowrap",spacing:3},a.createElement(l.Ay,{item:!0,xs:6,marginBottom:2},a.createElement(k.A,{"aria-label":"mode",name:"mode",value:U.mode,row:!0,onChange:H},a.createElement(P.A,{value:"subscribe",control:a.createElement($.A,null),label:t.formatMessage({defaultMessage:"Subscribe",id:"Apis.Details.AsyncApiConsole.Webhooks.Subscribe"})}),a.createElement(P.A,{value:"unsubscribe",control:a.createElement($.A,null),label:t.formatMessage({defaultMessage:"Unsubscribe",id:"Apis.Details.AsyncApiConsole.Webhooks.Unsubscribe"})}))),a.createElement(l.Ay,{item:!0,xs:6,marginBottom:2},a.createElement(w.A,{variant:"outlined",size:"small",sx:{width:"50%"},name:"callback",id:"standard-full-width",label:t.formatMessage({defaultMessage:"Callback URL",id:"Apis.Details.AsyncApiConsole.Webhooks.callback"}),error:g,required:!0,placeholder:"www.webhook.site",onChange:H,fullWidth:!0,InputProps:{disableUnderline:!0,classes:{root:{padding:0,"label + &":{marginTop:r.spacing(1)}},input:{borderRadius:4,backgroundColor:r.palette.common.white,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:r.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12}}},InputLabelProps:{shrink:!0}})),"subscribe"===U.mode&&a.createElement(a.Fragment,null,a.createElement(l.Ay,{item:!0,xs:6,marginBottom:2},a.createElement(w.A,{variant:"outlined",size:"small",sx:{width:"50%"},name:"secret",id:"standard-full-width",label:t.formatMessage({defaultMessage:"Secret",id:"Apis.Details.AsyncApiConsole.Webhooks.secret"}),placeholder:"secret",onChange:H,fullWidth:!0,InputProps:{disableUnderline:!0,classes:{root:{padding:0,"label + &":{marginTop:r.spacing(1)}},input:{borderRadius:4,backgroundColor:r.palette.common.white,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:r.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12}}},InputLabelProps:{shrink:!0}})),a.createElement(l.Ay,{item:!0,xs:6,marginBottom:2},a.createElement(w.A,{variant:"outlined",size:"small",sx:{width:"50%"},name:"lease",id:"standard-full-width",label:t.formatMessage({defaultMessage:"Lease Seconds",id:"Apis.Details.AsyncApiConsole.Webhooks.lease"}),onChange:H,defaultValue:5e4,fullWidth:!0,InputProps:{disableUnderline:!0,classes:{root:{padding:0,"label + &":{marginTop:r.spacing(1)}},input:{borderRadius:4,backgroundColor:r.palette.common.white,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:r.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12}}},InputLabelProps:{shrink:!0}}))),a.createElement(l.Ay,{item:!0,xs:12},a.createElement(w.A,{variant:"filled",label:t.formatMessage({defaultMessage:"cURL",id:"Apis.Details.AsyncApiConsole.Webhooks.curl"}),defaultValue:"",value:A,fullWidth:!0,multiline:!0,InputProps:{disableUnderline:!0,classes:{root:{padding:0,"label + &":{marginTop:r.spacing(1)}},input:{borderRadius:4,backgroundColor:r.custom.curlGenerator.backgroundColor,color:r.custom.curlGenerator.color,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:r.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12,fontFamily:"monospace",fontWeight:600}}},InputLabelProps:{shrink:!0}})))),a.createElement(v.A,{style:{paddingRight:"18px"}},a.createElement(S.A,{size:"small",onClick:()=>{!U.callback||U.callback.length<1?h(!0):(h(!1),f(s(U)))}},a.createElement(p.A,{id:"Apis.Details.AsyncApiConsole.Curl",defaultMessage:"Generate Curl"})),a.createElement(S.A,{size:"small",onClick:()=>{navigator.clipboard.writeText(A).then((()=>b.A.info(t.formatMessage({defaultMessage:"cURL copied",id:"Apis.Details.AsyncApiConsole.Webhooks.curl.copied"}))))}},a.createElement(p.A,{id:"Apis.Details.AsyncApiConsole.Copy",defaultMessage:"Copy Curl"}))))};function B(e){const t=e.topic.type.toLowerCase(),n="publish"===t||"subscribe"===t?t.substr(0,3):t,o=(0,I.A)(),r=o.custom.resourceChipColors[n],{generateGenericSubscriptionCommand:i,topic:s,expandable:d}=e,[u,m]=(0,a.useState)(i(s));return a.createElement(y.A,{sx:{marginBottom:"10px",border:`1px solid ${r}`},style:{pointerEvents:d?"auto":"none"}},a.createElement(x.A,{expandIcon:d&&a.createElement(C.A,null),"aria-controls":"generic-subscription-content",id:"generic-subscription-header",sx:{backgroundColor:T.A.hexToRGBA(r,.1),maxHeight:"40px","&$expanded":{maxHeight:"40px"}}},a.createElement(l.Ay,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:0},a.createElement(l.Ay,{item:!0,md:11},a.createElement(R.A,{invisible:"false",color:"error",variant:"dot"},a.createElement(S.A,{disableFocusRipple:!0,variant:"outlined",size:"small",sx:{backgroundColor:"#ffffff",borderColor:r,color:r,width:o.spacing(2)}},n.toUpperCase())),a.createElement(c.A,{display:"inline",style:{margin:"0px 30px"},gutterBottom:!0},s.name)))),a.createElement(E.A,null,a.createElement(l.Ay,{container:!0,direction:"column",wrap:"nowrap"},a.createElement(w.A,{variant:"filled",label:"cURL",defaultValue:"",value:u,multiline:!0,InputProps:{disableUnderline:!0,classes:{root:{padding:0,"label + &":{marginTop:o.spacing(1)}},input:{borderRadius:4,backgroundColor:o.custom.curlGenerator.backgroundColor,color:o.custom.curlGenerator.color,border:"1px solid #ced4da",padding:"5px 12px",marginTop:"11px",marginBottom:"11px",width:"100%",transition:o.transitions.create(["border-color","box-shadow"]),"&:focus":{borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"},fontSize:12,fontFamily:"monospace",fontWeight:600}}},InputLabelProps:{shrink:!0}}))),a.createElement(v.A,{style:{paddingRight:"18px"}},a.createElement(S.A,{size:"small",onClick:()=>{m(i(s))}},a.createElement(p.A,{id:"Apis.Details.AsyncApiConsole.Curl",defaultMessage:"Generate Curl"})),a.createElement(S.A,{size:"small",onClick:()=>{navigator.clipboard.writeText(u).then((()=>b.A.info(a.createElement(p.A,{id:"Apis.Details.AsyncApiConsole.Copied",defaultMessage:"cURL copied"}))))}},a.createElement(p.A,{id:"Apis.Details.AsyncApiConsole.Copy",defaultMessage:"Copy Curl"}))))}var L=n(43267),M=n(17681),N=n(45359),G=n(53846),W=n(62861);const j="AsyncApiUI",_={endpointSelectorRoot:`${j}-endpointSelectorRoot`,selectList:`${j}-selectList`},X=(0,o.Ay)("div")({[`& .${_.endpointSelectorRoot}`]:{paddingBottom:"20px"},[`& .${_.selectList}`]:{minWidth:"130px",maxWidth:"100%",border:"2px solid #41444e",fontFamily:"sans-serif",fontSize:"14px",fontWeight:700,padding:"2px 2px 2px 10px",borderRadius:"4px",color:"#3b4151"}});function K(e){const t=(0,d.A)(),{authorizationHeader:n,URLs:o,securitySchemeType:r,accessTokenProvider:i}=e,{api:s}=(0,a.useContext)(f._),l=s.advertiseInfo&&s.advertiseInfo.advertised;let c;c=o&&(o.http||o.https),s.type===W.A.API_TYPES.WS&&(c=o&&(o.ws||o.wss));let p=!0;o&&(o.http||o.https)||(p=!1);const[u,m]=(0,a.useState)(""),[A,y]=(0,a.useState)(c);(0,a.useEffect)((()=>{const e=s.id;(new g.A).getAllTopics(e).then((e=>{m(e.body)})).catch((e=>{console.log(e),b.A.error(t.formatMessage({id:"Apis.Details.AsyncApiConsole.AsyncApiUI.topics.get.error",defaultMessage:"Error while retrieving topics for the API."}))}))}),[]);function E(){let e;return e="apikey"===n?i():"BASIC"===r?"Basic "+i():l?i():"Bearer "+i(),e}function x(e){const{topic:t,callback:a,secret:o,mode:r,lease:i}=e,c=E();if("subscribe"===r){let e=`curl -X POST '${A}' -H 'Content-Type: application/x-www-form-urlencoded' -d 'hub.topic=${encodeURIComponent(t)}' -d 'hub.callback=${encodeURIComponent(a)}' -d 'hub.mode=${r}'`;return o&&(e+=` -d 'hub.secret=${o}'`),i&&(e+=` -d 'hub.lease_seconds=${i}'`),s.advertiseInfo&&s.advertiseInfo.adveritsed&&""!==n?e+=` -H '${n}: ${c}'`:e+=` -H 'Authorization: ${c}'`,e}{let e=`curl -X POST '${A}' -H 'Content-Type: application/x-www-form-urlencoded' -d 'hub.topic=${encodeURIComponent(t)}' -d 'hub.callback=${encodeURIComponent(a)}' -d 'hub.mode=${r}' -H 'Authorization: ${c}'`;return l&&""!==n&&(e=`curl -X POST '${A}' -H 'Content-Type: application/x-www-form-urlencoded' -d 'hub.topic=${encodeURIComponent(t)}' -d 'hub.callback=${encodeURIComponent(a)}' -d 'hub.mode=${r}' -H '${n}: ${c}'`),e}}function C(e){let t=e.name;return"/"===t.charAt(0)&&(t=t.substring(1)),t}function v(e){const t=E();if(e.name.includes("*")){let e=`wscat -c '${A}' -H '${"API-KEY"===r?"apikey":"Authorization"}: ${t}'`;return l&&""!==n&&(e=`wscat -c '${A}' -H '${n}: ${t}'`),e}{let a=`wscat -c '${A}/${C(e)}' -H '${"API-KEY"===r?"apikey":"Authorization"}: ${t}'`;return l&&""!==n&&(a=`wscat -c '${A}/${C(e)}' -H '${n}: ${t}'`),a}}function S(e){const t=E();if(e.name.includes("*")){let e=`curl -X GET '${A}' -H 'Authorization: ${t}'`;return l&&""!==n&&(e=`curl -X GET '${A}' -H '${n}: ${t}'`),e}{let a=`curl -X GET '${A}/${C(e)}' -H 'Authorization: ${t}'`;return l&&""!==n&&(a=`curl -X GET '${A}/${C(e)}' -H '${n}: ${t}'`),a}}function w(e){const t=E();if(e.name.includes("*")){let e=`curl -X GET '${A}' -H 'Authorization: ${t}'`;return""!==n&&(e=`curl -X GET '${A}' -H '${n}: ${t}'`),e}{let a=`curl -X GET '${A}/${C(e)}' -H 'Authorization: ${t}'`;return""!==n&&(a=`curl -X GET '${A}/${C(e)}' -H '${n}: ${t}'`),a}}return u?a.createElement(X,null,a.createElement(N.A,{variant:"standard",className:_.endpointSelectorRoot},a.createElement(L.A,null,"Servers"),a.createElement(G.A,{variant:"standard",className:_.selectList,id:"api-endpoint-select",value:A,displayEmpty:!0,onChange:e=>{y(e.target.value)}},Object.entries(o).map((e=>{let[t,n]=e;if(n)return a.createElement(M.A,{value:n,key:t},n)})))),s.type===W.A.API_TYPES.WEBSUB&&u.list.map(((e,t)=>a.createElement(D,{topic:e,generateGenericWHSubscriptionCurl:x,expandable:!0}))),s.type===W.A.API_TYPES.SSE&&u.list.map(((e,t)=>a.createElement(B,{generateGenericSubscriptionCommand:S,topic:e,expandable:!0}))),s.type===W.A.API_TYPES.WS&&u.list.map(((e,t)=>a.createElement(B,{generateGenericSubscriptionCommand:v,topic:e,expandable:!0}))),s.type===W.A.API_TYPES.ASYNC&&u.list.map(((e,t)=>a.createElement(B,{generateGenericSubscriptionCommand:w,topic:e,expandable:p})))):a.createElement(h.A,null)}const Y="AsyncApiConsole",F={paper:`${Y}-paper`,grid:`${Y}-grid`,userNotificationPaper:`${Y}-userNotificationPaper`,titleSub:`${Y}-titleSub`},q=(0,o.Ay)("div")((e=>{let{theme:t}=e;return{[`& .${F.paper}`]:{margin:t.spacing(1),padding:t.spacing(1)},[`& .${F.grid}`]:{marginTop:t.spacing(4),marginBottom:t.spacing(4),paddingRight:t.spacing(2),justifyContent:"center"},[`& .${F.userNotificationPaper}`]:{padding:t.spacing(2)},[`& .${F.titleSub}`]:{marginLeft:t.spacing(2),paddingTop:t.spacing(2),paddingBottom:t.spacing(2)}}}));function V(){(0,d.A)();const{api:e}=(0,a.useContext)(f._),[t,n]=(0,a.useState)("OAUTH"),[o,i]=(0,a.useState)(),[s,b]=(0,a.useState)(),[y,E]=(0,a.useState)(),[x,C]=(0,a.useState)(null),[v,S]=(0,a.useState)(null),[w,$]=(0,a.useState)(null),[I,k]=(0,a.useState)(""),[P,T]=(0,a.useState)(""),[R,U]=(0,a.useState)("PRODUCTION"),[O,H]=(0,a.useState)([]),[z,D]=(0,a.useState)(""),[B,L]=(0,a.useState)(""),M=e.endpointURLs,[N,G]=(0,a.useState)(M.length>0?M[0].URLs:[]),[W,j]=(0,a.useState)(!1),[_,X]=(0,a.useState)("Authorization"),[Y,V]=(0,a.useState)(""),[J,Q]=(0,a.useState)("PRODUCTION"),Z=u.A.getUser();function ee(){let e;O.get(R)&&({accessToken:e}=O.get(R).token),"PRODUCTION"===R?b(e):E(e)}if((0,a.useEffect)((()=>{const t=e.id;(new g.A).getAPIById(t).then((e=>{const t=e.obj;if(t.endpointURLs){const e=t.endpointURLs.map((e=>({name:e.environmentName,displayName:e.environmentDisplayName})));C(e)}else C([]);if(t.labels){const e=t.labels.map((e=>e.name));$(e)}else $([]);if(t.scopes){const e=t.scopes.map((e=>e.name));S(e)}else S([])})).catch((e=>{S([]),C([]),$([]);const{status:t}=e;404===t&&j(!0)}))}),[]),null===e||!v||!w||!x)return a.createElement(h.A,null);if(W)return a.createElement(p.A,{id:"Apis.Details.AsyncApiConsole.AsyncApiConsole.Api.Unavailable",defaultMessage:"API Not Found !"});let te=!1,ne=e.authorizationHeader?e.authorizationHeader:"Authorization";e&&e.securityScheme&&(te=e.securityScheme.includes("api_key"),te&&"API-KEY"===t&&(ne="apikey")),e.advertiseInfo&&e.advertiseInfo.advertised&&(ne=_);const ae=e=>{const t={http:null,https:null,ws:null,wss:null},[n]=e.split("://");return t[n]=e,t};return a.createElement(q,null,a.createElement(c.A,{variant:"h4",className:F.titleSub},a.createElement(p.A,{id:"Apis.Details.AsyncApiConsole.AsyncApiConsole.title",defaultMessage:"Try Out"})),a.createElement(r.A,{className:F.paper},a.createElement(l.Ay,{container:!0,className:F.grid},!Z&&(!e.advertiseInfo||!e.advertiseInfo.advertised)&&a.createElement(l.Ay,{item:!0,md:6},a.createElement(r.A,{className:F.userNotificationPaper},a.createElement(c.A,{variant:"h5",component:"h3"},a.createElement(m.A,null,"info")," ",a.createElement(p.A,{id:"notice",defaultMessage:"Notice"})),a.createElement(c.A,{component:"p"},a.createElement(p.A,{id:"api.console.require.access.token",defaultMessage:"You need an access token to try the API. Please log in and subscribe to the API to generate an access token. If you already have an access token, please provide it below."}))))),a.createElement(l.Ay,{container:!0,className:F.grid},a.createElement(A.A,{setSecurityScheme:n,securitySchemeType:t,setSelectedEnvironment:i,selectedEnvironment:o,productionAccessToken:s,setProductionAccessToken:b,sandboxAccessToken:y,setSandboxAccessToken:E,environments:x,scopes:v,labels:w,setUsername:k,setPassword:T,username:I,password:P,setSelectedKeyType:function(t,n){!n||e.advertiseInfo&&e.advertiseInfo.advertised?U(t):U(t,ee)},selectedKeyType:R,setKeys:H,setURLs:G,setProductionApiKey:L,setSandboxApiKey:D,productionApiKey:B,sandboxApiKey:z,environmentObject:M,setAdvAuthHeader:X,setAdvAuthHeaderValue:V,advAuthHeader:_,advAuthHeaderValue:Y,setSelectedEndpoint:Q,selectedEndpoint:J,api:e,URLs:null}))),a.createElement(r.A,{className:F.paper},a.createElement(K,{authorizationHeader:ne,URLs:(()=>{if(e.advertiseInfo&&e.advertiseInfo.advertised){if("PRODUCTION"===J)return ae(e.advertiseInfo.apiExternalProductionEndpoint);if("SANDBOX"===J)return ae(e.advertiseInfo.apiExternalSandboxEndpoint)}return N})(),securitySchemeType:t,accessTokenProvider:function(){return e.advertiseInfo&&e.advertiseInfo.advertised?Y:"BASIC"===t?btoa(I+":"+P):"API-KEY"===t?"PRODUCTION"===R?B:z:"PRODUCTION"===R?s:y}})))}V.propTypes={classes:s().shape({paper:s().string.isRequired,titleSub:s().string.isRequired,root:s().string.isRequired}).isRequired}}}]);
//# sourceMappingURL=2082.9ba0203193d4d5989932.bundle.js.map